(function(){var g={}; var _ = _ || {}
var f=function(window){var fX=function(a,b){this.m=a;this.f=b;this.a=new _.Sh;this.h=!1},gX=function(a){function b(c){var d=GenericPlayerApi.call(this)||this;d.m=c;d.a=_.qk();return d}_.x(b,GenericPlayerApi);b.prototype.getPlayerName=function(){return _.va};b.prototype.getVersion=function(){return _.ja};b.prototype.getOSName=function(){return this.a.os};b.prototype.getDeviceVersion=function(){return this.a.osVersion.name};b.prototype.getDeviceType=function(){return"browser"};b.prototype.getTotalDuration=function(){return this.m.isLive()?
0:1E3*this.m.getDuration()};b.prototype.getCurrentPosition=function(){return 1E3*this.m.getPosition()};b.prototype.getCurrentBitrate=function(){var c=this.m.getStats();return(c?c.streamBandwidth:0)/1E3};return new b(a)},hX=function(){this.l=this.f=this.a=this.h=this.m=null;this.o=new _.Sh;this.j=!1},iX=function(a,b){var c=b.analyticsAddress||null,d=b.nanoCDNHost||null,e=b.broadpeakDomainNames||"",f=b.uuid||null;a.h||(a.h=SmartLib.getInstance(),a.h.init(c,d,e),typeof f===_.fg&&a.h.setUUID(f))},jX=
function(a,b){var c=b.customParameters||{};a.a=a.h.createStreamingSession();a.a.setOption(StreamingSessionOptions.SESSION_PRECACHE,!0);for(var d in c)a.a.setCustomParameter(d,c[d]);a.o.on(a.m,_.ne,a.S.bind(a));a.l=gX(a.m);a.a.attachPlayer(a.l)},kX=function(a,b){_.Vh(a.o);a.f&&(a.f.release(),a.f=null);a.a&&(a.a.stopStreamingSession(b),a.a=null)},lX=function(){return!window.SmartLib||!window.GenericPlayerApi},mX=function(){};_.u=fX.prototype;
_.u.init=function(){var a=this.m,b=this.a;b.on(a,_.cg,this.vj.bind(this));b.on(a,_.hd,this.tj.bind(this));b.on(a,"seek",this.uj.bind(this))};_.u.tj=function(a){a=a.detail;typeof a.bandwidth===_.k&&this.f.notifyLayerSwitch(a.bandwidth/1E3)};_.u.vj=function(a){var b=this.m,c=this.f;a=a.detail;var d=a.currentState;a.previousState===_.Lp&&c.notifyStallEnd(!b.isPaused());switch(d){case _.Lp:c.notifyStallStart();break;case _.Up:this.h?c.notifyResume():(c.notifyFirstImage(),this.h=!0);break;case _.Tp:c.notifyPause()}};
_.u.uj=function(){var a=1E3*this.m.getPosition();this.f.notifySeek(a)};_.u.release=function(){this.a&&(_.Vh(this.a),this.a=null)};_.x(hX,_.pv);_.u=hX.prototype;_.u.onPlayerCreated=function(a){this.m=a};_.u.onContentWillLoad=function(a,b){var c=this,d=a.getConfiguration().broadpeak;if(d){if(lX())return a.onError(new _.N(1,9,11E3));this.j=!0;iX(this,d);jX(this,d);return this.a.getURL(b.url).then(function(e){if(e.isError()){var f=e.getDetailedErrorCode();e=e.getDetailedErrorMessage();c.m.onError(new _.N(1,9,11001,{bpkErrorCode:f,message:e}));kX(c,void 0)}else b.url=e.getURL(),c.f=new fX(c.m,c.l),c.f.init()})}};
_.u.onContentLoaded=function(){!1!==this.j&&this.a.precacheEnded()};_.u.S=function(a){a=a.detail;if(7003===a.code)kX(this,SmartLib.BPFormatNotSupportedError);else if(a.severity===_.P)switch(a.category){case 3:kX(this,SmartLib.BPDecodingError);break;case 1:kX(this,SmartLib.BPNetworkingError);break;case 6:kX(this,SmartLib.BPAccessRightError);break;default:kX(this,SmartLib.BPUnspecifiedError)}};_.u.onPlayerWillRelease=function(){lX()||kX(this,SmartLib.BPSessionEndsNormally);this.j=!1};_.u.id=function(){return"broadpeak"};
_.J("clpp.broadpeak.BroadpeakPlugin",hX);hX.isSdkMissing=lX;hX.Id="broadpeak";mX.prototype.create=function(){return new hX};_.Qs(new mX);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();