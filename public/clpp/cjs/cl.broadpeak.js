(function(){var g={}; var _ = _ || {}
var f=function(window){var ZX=function(a,b){this.m=a;this.f=b;this.a=new _.Wh;this.h=!1},$X=function(a){function b(c){var d=GenericPlayerApi.call(this)||this;d.m=c;d.a=_.xk();return d}_.x(b,GenericPlayerApi);b.prototype.getPlayerName=function(){return _.ta};b.prototype.getVersion=function(){return _.ha};b.prototype.getOSName=function(){return this.a.os};b.prototype.getDeviceVersion=function(){return this.a.osVersion.name};b.prototype.getDeviceType=function(){return"browser"};b.prototype.getTotalDuration=function(){return this.m.isLive()?
0:1E3*this.m.getDuration()};b.prototype.getCurrentPosition=function(){return 1E3*this.m.getPosition()};b.prototype.getCurrentBitrate=function(){var c=this.m.getStats();return(c?c.streamBandwidth:0)/1E3};return new b(a)},aY=function(){this.l=this.f=this.a=this.h=this.m=null;this.o=new _.Wh;this.j=!1},bY=function(a,b){var c=b.analyticsAddress||null,d=b.nanoCDNHost||null,e=b.broadpeakDomainNames||"",f=b.uuid||null;a.h||(a.h=SmartLib.getInstance(),a.h.init(c,d,e),typeof f===_.ig&&a.h.setUUID(f))},cY=
function(a,b){var c=b.customParameters||{};a.a=a.h.createStreamingSession();a.a.setOption(StreamingSessionOptions.SESSION_PRECACHE,!0);for(var d in c)a.a.setCustomParameter(d,c[d]);a.o.on(a.m,_.qe,a.Ij.bind(a));a.l=$X(a.m);a.a.attachPlayer(a.l)},dY=function(a,b){_.Zh(a.o);a.f&&(a.f.release(),a.f=null);a.a&&(a.a.stopStreamingSession(b),a.a=null)},eY=function(){return!window.SmartLib||!window.GenericPlayerApi},fY=function(){};_.u=ZX.prototype;
_.u.init=function(){var a=this.m,b=this.a;b.on(a,_.fg,this.Lj.bind(this));b.on(a,_.gd,this.Jj.bind(this));b.on(a,"seek",this.Kj.bind(this))};_.u.Jj=function(a){a=a.detail;typeof a.bandwidth===_.k&&this.f.notifyLayerSwitch(a.bandwidth/1E3)};_.u.Lj=function(a){var b=this.m,c=this.f;a=a.detail;var d=a.currentState;a.previousState===_.$p&&c.notifyStallEnd(!b.isPaused());switch(d){case _.$p:c.notifyStallStart();break;case _.iq:this.h?c.notifyResume():(c.notifyFirstImage(),this.h=!0);break;case _.hq:c.notifyPause()}};
_.u.Kj=function(){var a=1E3*this.m.getPosition();this.f.notifySeek(a)};_.u.release=function(){this.a&&(_.Zh(this.a),this.a=null)};_.x(aY,_.Gv);_.u=aY.prototype;_.u.onPlayerCreated=function(a){this.m=a};_.u.onContentWillLoad=function(a,b){var c=this,d=a.getConfiguration().broadpeak;if(d){if(eY())return a.onError(new _.O(1,9,11E3));this.j=!0;bY(this,d);cY(this,d);return this.a.getURL(b.url).then(function(e){if(e.isError()){var f=e.getDetailedErrorCode();e=e.getDetailedErrorMessage();c.m.onError(new _.O(1,9,11001,{bpkErrorCode:f,message:e}));dY(c,void 0)}else b.url=e.getURL(),c.f=new ZX(c.m,c.l),c.f.init()})}};
_.u.onContentLoaded=function(){!1!==this.j&&this.a.precacheEnded()};_.u.Ij=function(a){a=a.detail;if(7003===a.code)dY(this,SmartLib.BPFormatNotSupportedError);else if(a.severity===_.P)switch(a.category){case 3:dY(this,SmartLib.BPDecodingError);break;case 1:dY(this,SmartLib.BPNetworkingError);break;case 6:dY(this,SmartLib.BPAccessRightError);break;default:dY(this,SmartLib.BPUnspecifiedError)}};_.u.onPlayerWillRelease=function(){eY()||dY(this,SmartLib.BPSessionEndsNormally);this.j=!1};_.u.id=function(){return"broadpeak"};
_.J("clpp.broadpeak.BroadpeakPlugin",aY);aY.isSdkMissing=eY;aY.Id="broadpeak";fY.prototype.create=function(){return new aY};_.gt(new fY);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();