(function(){var g={}; var _ = _ || {}
var f=function(window){var FS="clpp.ima.AdsManagerFactory",GS=function(a,b,c){this.a=a;this.f=a.getAdPodInfo();this.j=b;this.h=c},HS=function(){},IS=function(a){this.a=a},JS=function(a){var b=a.Nd("ima");if(!b)throw Error("IMA plugin not created.");var c=b.Zc(),d=b.h;b=b.a;if(!c||!d||!b)throw Error("IMA plugin not initialized.");var e=a.getSurface().getMedia();if(!e)throw Error("Missing media element.");this.m=a;this.l=e;a=this.m.getConfiguration();a=_.M.bb(a.ima||{});this.G=_.M.pa({disableCustomPlayback:!1},a);this.L=
c;this.N=d;this.j=b;this.J=new _.lu;this.g=new _.K("clpp.ima");this.h=this.a=null;this.f=new _.gk;this.K=!1;this.H=new _.Sh;this.P=new HS;this.o=null;this.C=this.A=this.B=!1;this.I=this.w=null;c=this.H;d=google.ima.AdErrorEvent.Type.AD_ERROR;c.one(this.j,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.fm.bind(this));c.on(this.j,d,this.em.bind(this));c.on(this.m,_.me,this.lm.bind(this))},KS=function(a){var b=a.a,c=a.H,d=google.ima.AdEvent.Type;c.on(b,d.AD_BREAK_READY,a.Vl.bind(a));c.on(b,
d.LOADED,a.Zj.bind(a));c.on(b,d.CONTENT_PAUSE_REQUESTED,a.mm.bind(a));c.on(b,d.STARTED,a.ak.bind(a));c.on(b,d.LOG,a.Zl.bind(a));c.on(b,d.AD_PROGRESS,a.cm.bind(a));c.on(b,d.AD_BUFFERING,a.Wl.bind(a));c.on(b,d.FIRST_QUARTILE,a.Xj.bind(a));c.on(b,d.MIDPOINT,a.$l.bind(a));c.on(b,d.THIRD_QUARTILE,a.bk.bind(a));c.on(b,d.PAUSED,a.bm.bind(a));c.on(b,d.RESUMED,a.dm.bind(a));c.on(b,d.CLICK,a.Wj.bind(a));c.on(b,d.SKIPPED,a.$j.bind(a));c.on(b,d.IMPRESSION,a.Yj.bind(a));c.on(b,d.COMPLETE,a.Xl.bind(a));c.on(b,
d.CONTENT_RESUME_REQUESTED,a.nm.bind(a))},LS=function(a){a=a.G;var b=new google.ima.AdsRenderingSettings;b.restoreCustomPlaybackStateOnAdBreakComplete=!1;typeof a.bitrate===_.k&&(b.bitrate=a.bitrate);b.enablePreloading=typeof a.enablePreloading===_.id?a.enablePreloading:!0;typeof a.loadVideoTimeout===_.k&&(b.loadVideoTimeout=a.loadVideoTimeout);Array.isArray(a.mimeTypes)&&(b.mimeTypes=a.mimeTypes);typeof a.playAdsAfterTime===_.k&&(b.playAdsAfterTime=a.playAdsAfterTime);typeof a.useStyledLinearAds===
_.id&&(b.useStyledLinearAds=a.useStyledLinearAds);b.uiElements=Array.isArray(a.uiElements)?a.uiElements:[];return b},NS=function(a){a.o=null;MS(a,_.Kc);a.m.getSurface().hide(a.L)},OS=function(a){_.vq(a.l,{visibility:"visible"})},MS=function(a,b,c){c=c&&c.getAd();var d=null;c&&(d={ad:new GS(c,a.B,a.A)});a.m.trigger(new _.L(b,d))},PS=function(a,b){var c=b?a.P.create(b.getErrorCode()):null;a.m.onError(new _.N(1,9,10003,{errorType:c},b))},QS=function(a){return!1===a.G.disableCustomPlayback&&a.a.isCustomPlaybackUsed()&&
_.ok()},SS=function(a){var b,c;return _.I(function(d){if(1==d.a)return a.N.initialize(),b=!!a.m.getConfiguration().muted,_.y(d,a.J.canPlay(b),2);c=d.f;if(!c&&!QS(a))return MS(a,_.gd),a.g.warn(_.na),d["return"]();RS(a);_.A(d)})},TS=function(a,b){return _.I(function(c){if(1==c.a)return a.N.initialize(),_.y(c,b.play(),2);RS(a);_.A(c)})},RS=function(a){a.a.init(a.l.offsetWidth,a.l.offsetHeight,google.ima.ViewMode.NORMAL);a.a.start();a.K=!0},US=function(){this.a=this.h=this.f=null},VS=function(){return!window.google||
!google.ima||!google.ima.AdsLoader},WS=function(){},XS=function(){this.fd=new _.K(FS)};_.u=GS.prototype;_.u.nb=function(){return"Google IMA SDK"};_.u.ob=function(){return google.ima.VERSION};_.u.rb=function(){return 0};_.u.getId=function(){return this.a.getAdId()};_.u.getCreativeId=function(){return this.a.getCreativeId()};_.u.getApiFramework=function(){return this.a.getApiFramework()};_.u.getAdSystem=function(){return this.a.getAdSystem()};_.u.getAdvertiserName=function(){return this.a.getAdvertiserName()};
_.u.getTitle=function(){return this.a.getTitle()};_.u.getDuration=function(){return this.a.getDuration()};_.u.getPosition=function(){return 0};_.u.getSkipTimeOffset=function(){return this.a.getSkipTimeOffset()};_.u.Tb=function(){return this.f?this.f.getIsBumper():!1};_.u.pb=function(){var a=null,b=this.a,c=Object.keys(b).find(function(d){return typeof b[d]===_.Ue&&typeof b[d].clickThroughUrl===_.fg});c&&(a=b[c].clickThroughUrl);return a};_.u.getMediaUrl=function(){return this.a.getMediaUrl()};
_.u.eb=function(){return this.a.getVastMediaWidth()};_.u.cb=function(){return this.a.getVastMediaHeight()};_.u.Pa=function(){return this.a.getVastMediaBitrate()};_.u.Qa=function(){return this.h?2:this.j?1:0};_.u.getPodIndex=function(){return this.f?this.f.getPodIndex():0};_.u.Cb=function(){return this.f?this.f.getTimeOffset():0};_.u.Db=function(){return this.f?this.f.getAdPosition():1};_.u.fb=function(){return this.f?this.f.getTotalAds():1};_.u.getWrapperAdIds=function(){return this.a.getWrapperAdIds()};
_.u.getWrapperAdSystems=function(){return this.a.getWrapperAdSystems()};_.u.getWrapperCreativeIds=function(){return this.a.getWrapperCreativeIds()};GS.prototype.getWrapperCreativeIds=GS.prototype.getWrapperCreativeIds;GS.prototype.getWrapperAdSystems=GS.prototype.getWrapperAdSystems;GS.prototype.getWrapperAdIds=GS.prototype.getWrapperAdIds;GS.prototype.getSequenceLength=GS.prototype.fb;GS.prototype.getPositionInSequence=GS.prototype.Db;GS.prototype.getPodTimeOffset=GS.prototype.Cb;
GS.prototype.getPodIndex=GS.prototype.getPodIndex;GS.prototype.getPodType=GS.prototype.Qa;GS.prototype.getMediaBitrate=GS.prototype.Pa;GS.prototype.getMediaHeight=GS.prototype.cb;GS.prototype.getMediaWidth=GS.prototype.eb;GS.prototype.getMediaUrl=GS.prototype.getMediaUrl;GS.prototype.getClickThroughUrl=GS.prototype.pb;GS.prototype.isBumper=GS.prototype.Tb;GS.prototype.getSkipTimeOffset=GS.prototype.getSkipTimeOffset;GS.prototype.getPosition=GS.prototype.getPosition;GS.prototype.getDuration=GS.prototype.getDuration;
GS.prototype.getTitle=GS.prototype.getTitle;GS.prototype.getAdvertiserName=GS.prototype.getAdvertiserName;GS.prototype.getAdSystem=GS.prototype.getAdSystem;GS.prototype.getApiFramework=GS.prototype.getApiFramework;GS.prototype.getCreativeId=GS.prototype.getCreativeId;GS.prototype.getId=GS.prototype.getId;GS.prototype.getTechnology=GS.prototype.rb;GS.prototype.getAdManagerVersion=GS.prototype.ob;GS.prototype.getAdManagerName=GS.prototype.nb;HS.prototype.create=function(a){var b=google.ima.AdError.ErrorCode;switch(a){case b.VAST_LOAD_TIMEOUT:case b.VAST_MEDIA_LOAD_TIMEOUT:case b.FAILED_TO_REQUEST_ADS:return 0;case b.VIDEO_PLAY_ERROR:return 1;default:return 2}};IS.prototype.getCuePoints=function(){return this.a};IS.prototype.Fb=function(){return 0<=this.a.indexOf(0)||0===this.a.length};IS.prototype.Eb=function(){return 0<=this.a.indexOf(-1)};IS.prototype.hasPostroll=IS.prototype.Eb;IS.prototype.hasPreroll=IS.prototype.Fb;IS.prototype.getCuePoints=IS.prototype.getCuePoints;_.u=JS.prototype;
_.u.fm=function(a){var b=this;this.a=a.getAdsManager(this.l,LS(this));this.a.isCustomPlaybackUsed()&&!QS(this)?(this.g.warn("IMA plugin is disabled for this platform with single video element. Disposing."),this.m.onError(new _.N(1,9,10002)),this.pc()):(this.h=new _.ju(this.m.getSurface(),function(c,d,e){b.a.resize(c,d,e?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),a=this.a.getCuePoints(),this.w=new IS(a),this.m.trigger(new _.L(_.Nc,{adsTimeline:this.w})),KS(this));this.f.resolve()};
_.u.em=function(a){PS(this,a.getError());this.f.resolve()};_.u.mm=function(a){var b=this;return _.I(function(c){switch(c.a){case 1:return b.C=!0,QS(b)?(b.I=b.m.getPosition(),_.y(c,b.m.detach(),5)):_.y(c,b.m.pause(),4);case 4:_.vq(b.l,{visibility:_.te});c.F(3);break;case 5:var d=b.m;d.a&&d.a.stopForwardingEventsTo(d);case 3:MS(b,_.uc,a),b.h.start(),_.A(c)}})};_.u.Vl=function(){var a=this;return _.I(function(b){a.a.start();_.A(b)})};
_.u.Zj=function(a){a.getAd().isLinear()?MS(this,_.Dc,a):(this.a.discardAdBreak(),this.B||(this.B=!0,this.m.play()))};_.u.ak=function(a){this.o=a.getAd().getDuration();MS(this,_.Jc,a);this.m.getSurface().show(this.L)};_.u.Zl=function(a){a=a.getAdData();PS(this,a?a.adError:null);NS(this)};_.u.cm=function(a){MS(this,_.Gc,a)};_.u.Wl=function(a){MS(this,_.wc,a)};_.u.Xj=function(a){MS(this,_.zc,a)};_.u.$l=function(a){MS(this,_.Ec,a)};_.u.bk=function(a){MS(this,_.Lc,a)};_.u.bm=function(a){MS(this,_.Fc,a)};
_.u.dm=function(a){MS(this,_.Hc,a)};_.u.Wj=function(a){this.pause();MS(this,_.xc,a)};_.u.$j=function(a){MS(this,_.Ic,a);NS(this)};_.u.Yj=function(a){MS(this,_.Cc,a)};_.u.Xl=function(a){MS(this,_.yc,a);NS(this)};
_.u.nm=function(){var a=this;return _.I(function(b){switch(b.a){case 1:a.B=!0;if(!QS(a)||null===a.I){if(!a.C)return b["return"](a.m.play());OS(a);b.F(2);break}var c=a.m;c.a&&c.a.forwardEventsTo(c);return _.y(b,_.Ms(a.m),3);case 3:if(a.A){b.F(2);break}return _.y(b,a.m.seek(a.I),2);case 2:a.C=!1;a.h&&a.h.stop();if(a.A){b.F(6);break}return _.y(b,a.m.play(),6);case 6:MS(a,_.vc),_.A(b)}})};_.u.lm=function(){this.A=!0;this.j.contentComplete()};
_.u.load=function(){var a=this,b,c,d,e,f;return _.I(function(g){if(1==g.a){b=a.m;c=a.G;try{if(typeof c.adTagUrl!==_.fg)throw new _.N(1,9,10001,{missingKeys:"adTagUrl"});}catch(h){return b.onError(h),a.f.resolve(),g["return"](a.f)}return c.adTagUrl?_.y(g,a.J.canPlay(!1),2):(a.f.resolve(),g["return"](a.f))}if(3!=g.a)return d=g.f,_.y(g,a.J.canPlay(!0),3);e=g.f;f=new google.ima.AdsRequest;f.adTagUrl=c.adTagUrl;f.setAdWillAutoPlay(d);f.setAdWillPlayMuted(e);a.j.getSettings().setAutoPlayAdBreaks(!1);a.j.requestAds(f);
return g["return"](a.f)})};_.u.start=function(a){var b=this;return _.I(function(c){return b.a&&b.w&&!b.K?b.w.Fb()?_.y(c,SS(b),0):_.y(c,TS(b,a),0):_.y(c,a.play(),0)})};_.u.Tc=function(){};_.u.Pc=function(){return!0};_.u.resume=function(){this.a&&this.a.resume()};_.u.pause=function(){this.a&&this.a.pause()};_.u.skip=function(){this.a&&this.a.skip()};_.u.getVolume=function(){return this.a?this.a.getVolume():1};_.u.setVolume=function(a){this.a&&this.a.setVolume(a)};
_.u.getPosition=function(){if(!this.a||null===this.o)return-1;var a=this.a.getRemainingTime();return 0>a?0:this.o-a};_.u.pc=function(){this.a&&(this.a.destroy(),this.a=null);OS(this);this.H.release();this.h&&(this.h.stop(),this.h=null);return Promise.resolve()};JS.prototype.getPosition=JS.prototype.getPosition;JS.prototype.setVolume=JS.prototype.setVolume;JS.prototype.getVolume=JS.prototype.getVolume;JS.prototype.skip=JS.prototype.skip;JS.prototype.pause=JS.prototype.pause;JS.prototype.resume=JS.prototype.resume;_.x(US,_.pv);_.u=US.prototype;_.u.onPlayerCreated=function(a){if(VS())return a.onError(new _.N(1,9,1E4));this.f=_.tq(_.Wd,{"class":"clpp-ima clpp-hidden"});a.getSurface().addElementToContainer(this.f);this.h=new google.ima.AdDisplayContainer(this.f,a.getSurface().getMedia());this.a=new google.ima.AdsLoader(this.h);this.a.getSettings().setPlayerType(_.va);this.a.getSettings().setPlayerVersion(_.ja);this.a.getSettings().setAutoPlayAdBreaks(!0)};
_.u.onPlayerWillDestroy=function(a){this.a&&(this.a.destroy(),this.a=null);this.h&&(this.h.destroy(),this.h=null);this.f&&(a.getSurface().removeElementFromContainer(this.f),this.f=null)};_.u.bl=function(){return this.a};_.u.$k=function(){return this.h};_.u.Zc=function(){return this.f};_.u.id=function(){return"ima"};_.J("clpp.ima.ImaPlugin",US);US.prototype.getAdContainer=US.prototype.Zc;US.prototype.getAdDisplayContainer=US.prototype.$k;US.prototype.getAdsLoader=US.prototype.bl;US.Id="ima";
US.isSdkMissing=VS;WS.prototype.create=function(){return new US};_.Qs(new WS);XS.prototype.name=function(){return FS};XS.prototype.a=function(a,b){return a.namespace()===_.Ad?!1:VS()?(this.fd.warn("IMA SDK is not loaded."),!1):!(!b||!b.ima)};XS.prototype.create=function(a){return new JS(a)};_.nq(new XS);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();