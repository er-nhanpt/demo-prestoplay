(function(){var g={}; var _ = _ || {}
var f=function(window){var AT="clpp.ima.AdsManagerFactory",BT=function(a,b,c){this.a=a;this.f=a.getAdPodInfo();this.j=b;this.h=c},CT=function(){},DT=function(a){this.a=a},ET=function(a){var b=a.Wd("ima");if(!b)throw Error("IMA plugin not created.");var c=b.cd(),d=b.h;b=b.a;if(!c||!d||!b)throw Error("IMA plugin not initialized.");var e=a.getSurface().getMedia();if(!e)throw Error("Missing media element.");this.m=a;this.l=e;a=this.m.getConfiguration();a=_.N.cb(a.ima||{});this.G=_.N.qa({disableCustomPlayback:!1},a);this.L=
c;this.M=d;this.j=b;this.J=new _.Cu;this.g=new _.K("clpp.ima");this.h=this.a=null;this.f=new _.mk;this.K=!1;this.H=new _.Wh;this.P=new CT;this.o=null;this.C=this.A=this.B=!1;this.I=this.w=null;c=this.H;d=google.ima.AdErrorEvent.Type.AD_ERROR;c.one(this.j,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.zm.bind(this));c.on(this.j,d,this.ym.bind(this));c.on(this.m,_.pe,this.Fm.bind(this))},FT=function(a){var b=a.a,c=a.H,d=google.ima.AdEvent.Type;c.on(b,d.AD_BREAK_READY,a.pm.bind(a));c.on(b,
d.LOADED,a.qk.bind(a));c.on(b,d.CONTENT_PAUSE_REQUESTED,a.Gm.bind(a));c.on(b,d.STARTED,a.tk.bind(a));c.on(b,d.LOG,a.tm.bind(a));c.on(b,d.AD_PROGRESS,a.rk.bind(a));c.on(b,d.AD_BUFFERING,a.qm.bind(a));c.on(b,d.FIRST_QUARTILE,a.nk.bind(a));c.on(b,d.MIDPOINT,a.um.bind(a));c.on(b,d.THIRD_QUARTILE,a.uk.bind(a));c.on(b,d.PAUSED,a.wm.bind(a));c.on(b,d.RESUMED,a.xm.bind(a));c.on(b,d.CLICK,a.mk.bind(a));c.on(b,d.SKIPPED,a.sk.bind(a));c.on(b,d.IMPRESSION,a.pk.bind(a));c.on(b,d.COMPLETE,a.rm.bind(a));c.on(b,
d.CONTENT_RESUME_REQUESTED,a.Hm.bind(a))},GT=function(a){a=a.G;var b=new google.ima.AdsRenderingSettings;b.restoreCustomPlaybackStateOnAdBreakComplete=!1;typeof a.bitrate===_.k&&(b.bitrate=a.bitrate);b.enablePreloading=typeof a.enablePreloading===_.hd?a.enablePreloading:!0;typeof a.loadVideoTimeout===_.k&&(b.loadVideoTimeout=a.loadVideoTimeout);Array.isArray(a.mimeTypes)&&(b.mimeTypes=a.mimeTypes);typeof a.playAdsAfterTime===_.k&&(b.playAdsAfterTime=a.playAdsAfterTime);typeof a.useStyledLinearAds===
_.hd&&(b.useStyledLinearAds=a.useStyledLinearAds);b.uiElements=Array.isArray(a.uiElements)?a.uiElements:[];return b},IT=function(a){a.o=null;HT(a,_.Ic);a.m.getSurface().hide(a.L)},JT=function(a){_.Kq(a.l,{visibility:"visible"})},HT=function(a,b,c){c=c&&c.getAd();var d=null;c&&(d={ad:new BT(c,a.B,a.A)});a.m.trigger(new _.L(b,d))},KT=function(a,b){var c=b?a.P.create(b.getErrorCode()):null;a.m.onError(new _.O(1,9,10003,{errorType:c},b))},LT=function(a){return!1===a.G.disableCustomPlayback&&a.a.isCustomPlaybackUsed()&&
_.vk()},NT=function(a){var b,c;return _.I(function(d){if(1==d.a)return a.M.initialize(),b=!!a.m.getConfiguration().muted,_.y(d,a.J.canPlay(b),2);c=d.f;if(!c&&!LT(a))return HT(a,_.fd),a.g.warn(_.la),d["return"]();MT(a);_.B(d)})},OT=function(a,b){return _.I(function(c){if(1==c.a)return a.M.initialize(),_.y(c,b.play(),2);MT(a);_.B(c)})},MT=function(a){a.a.init(a.l.offsetWidth,a.l.offsetHeight,google.ima.ViewMode.NORMAL);a.a.start();a.K=!0},PT=function(){this.a=this.h=this.f=null},QT=function(){return!window.google||
!google.ima||!google.ima.AdsLoader},RT=function(){},ST=function(){this.jd=new _.K(AT)};_.u=BT.prototype;_.u.ob=function(){return"Google IMA SDK"};_.u.pb=function(){return google.ima.VERSION};_.u.sb=function(){return 0};_.u.getId=function(){return this.a.getAdId()};_.u.getCreativeId=function(){return this.a.getCreativeId()};_.u.Sb=function(){return""};_.u.getApiFramework=function(){return this.a.getApiFramework()};_.u.getAdSystem=function(){return this.a.getAdSystem()};_.u.getAdvertiserName=function(){return this.a.getAdvertiserName()};
_.u.getTitle=function(){return this.a.getTitle()};_.u.getDuration=function(){return this.a.getDuration()};_.u.getPosition=function(){return 0};_.u.getSkipTimeOffset=function(){return this.a.getSkipTimeOffset()};_.u.Wb=function(){return this.f?this.f.getIsBumper():!1};_.u.qb=function(){var a=null,b=this.a,c=Object.keys(b).find(function(d){return typeof b[d]===_.Xe&&typeof b[d].clickThroughUrl===_.ig});c&&(a=b[c].clickThroughUrl);return a};_.u.getMediaUrl=function(){return this.a.getMediaUrl()};
_.u.fb=function(){return this.a.getVastMediaWidth()};_.u.eb=function(){return this.a.getVastMediaHeight()};_.u.Qa=function(){return this.a.getVastMediaBitrate()};_.u.Ra=function(){return this.h?2:this.j?1:0};_.u.getPodIndex=function(){return this.f?this.f.getPodIndex():0};_.u.Fb=function(){return this.f?this.f.getTimeOffset():0};_.u.Gb=function(){return this.f?this.f.getAdPosition():1};_.u.gb=function(){return this.f?this.f.getTotalAds():1};_.u.getWrapperAdIds=function(){return this.a.getWrapperAdIds()};
_.u.getWrapperAdSystems=function(){return this.a.getWrapperAdSystems()};_.u.getWrapperCreativeIds=function(){return this.a.getWrapperCreativeIds()};_.u.Vb=function(){return null};BT.prototype.getVideoElement=BT.prototype.Vb;BT.prototype.getWrapperCreativeIds=BT.prototype.getWrapperCreativeIds;BT.prototype.getWrapperAdSystems=BT.prototype.getWrapperAdSystems;BT.prototype.getWrapperAdIds=BT.prototype.getWrapperAdIds;BT.prototype.getSequenceLength=BT.prototype.gb;BT.prototype.getPositionInSequence=BT.prototype.Gb;
BT.prototype.getPodTimeOffset=BT.prototype.Fb;BT.prototype.getPodIndex=BT.prototype.getPodIndex;BT.prototype.getPodType=BT.prototype.Ra;BT.prototype.getMediaBitrate=BT.prototype.Qa;BT.prototype.getMediaHeight=BT.prototype.eb;BT.prototype.getMediaWidth=BT.prototype.fb;BT.prototype.getMediaUrl=BT.prototype.getMediaUrl;BT.prototype.getClickThroughUrl=BT.prototype.qb;BT.prototype.isBumper=BT.prototype.Wb;BT.prototype.getSkipTimeOffset=BT.prototype.getSkipTimeOffset;BT.prototype.getPosition=BT.prototype.getPosition;
BT.prototype.getDuration=BT.prototype.getDuration;BT.prototype.getTitle=BT.prototype.getTitle;BT.prototype.getAdvertiserName=BT.prototype.getAdvertiserName;BT.prototype.getAdSystem=BT.prototype.getAdSystem;BT.prototype.getApiFramework=BT.prototype.getApiFramework;BT.prototype.getSourceId=BT.prototype.Sb;BT.prototype.getCreativeId=BT.prototype.getCreativeId;BT.prototype.getId=BT.prototype.getId;BT.prototype.getTechnology=BT.prototype.sb;BT.prototype.getAdManagerVersion=BT.prototype.pb;
BT.prototype.getAdManagerName=BT.prototype.ob;CT.prototype.create=function(a){var b=google.ima.AdError.ErrorCode;switch(a){case b.VAST_LOAD_TIMEOUT:case b.VAST_MEDIA_LOAD_TIMEOUT:case b.FAILED_TO_REQUEST_ADS:return 0;case b.VIDEO_PLAY_ERROR:return 1;default:return 2}};DT.prototype.getCuePoints=function(){return this.a};DT.prototype.Ib=function(){return 0<=this.a.indexOf(0)||0===this.a.length};DT.prototype.Hb=function(){return 0<=this.a.indexOf(-1)};DT.prototype.hasPostroll=DT.prototype.Hb;DT.prototype.hasPreroll=DT.prototype.Ib;DT.prototype.getCuePoints=DT.prototype.getCuePoints;_.u=ET.prototype;
_.u.zm=function(a){var b=this;this.a=a.getAdsManager(this.l,GT(this));this.a.isCustomPlaybackUsed()&&!LT(this)?(this.g.warn("IMA plugin is disabled for this platform with single video element. Disposing."),this.m.onError(new _.O(1,9,10002)),this.sc()):(this.h=new _.Au(this.m.getSurface(),function(c,d,e){b.a.resize(c,d,e?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),a=this.a.getCuePoints(),this.w=new DT(a),this.m.trigger(new _.L(_.Lc,{adsTimeline:this.w})),FT(this));this.f.resolve()};
_.u.ym=function(a){KT(this,a.getError());this.f.resolve()};_.u.Gm=function(a){var b=this;return _.I(function(c){switch(c.a){case 1:return b.C=!0,LT(b)?(b.I=b.m.getPosition(),_.y(c,b.m.detach(),5)):_.y(c,b.m.pause(),4);case 4:_.Kq(b.l,{visibility:_.we});c.F(3);break;case 5:var d=b.m;d.a&&d.a.stopForwardingEventsTo(d);case 3:HT(b,_.rc,a),b.h.start(),_.B(c)}})};_.u.pm=function(){var a=this;return _.I(function(b){a.a.start();_.B(b)})};
_.u.qk=function(a){a.getAd().isLinear()?HT(this,_.Bc,a):(this.a.discardAdBreak(),this.B||(this.B=!0,this.m.play()))};_.u.tk=function(a){this.o=a.getAd().getDuration();HT(this,_.Hc,a);this.m.getSurface().show(this.L)};_.u.tm=function(a){a=a.getAdData();KT(this,a?a.adError:null);IT(this)};_.u.rk=function(a){HT(this,_.Ec,a)};_.u.qm=function(a){HT(this,_.tc,a)};_.u.nk=function(a){HT(this,_.wc,a)};_.u.um=function(a){HT(this,_.Cc,a)};_.u.uk=function(a){HT(this,_.Jc,a)};_.u.wm=function(a){HT(this,_.Dc,a)};
_.u.xm=function(a){HT(this,_.Fc,a)};_.u.mk=function(a){this.pause();HT(this,_.uc,a)};_.u.sk=function(a){HT(this,_.Gc,a);IT(this)};_.u.pk=function(a){HT(this,_.Ac,a)};_.u.rm=function(a){HT(this,_.vc,a);IT(this)};
_.u.Hm=function(){var a=this;return _.I(function(b){switch(b.a){case 1:a.B=!0;if(!LT(a)||null===a.I){if(!a.C)return b["return"](a.m.play());JT(a);b.F(2);break}var c=a.m;c.a&&c.a.forwardEventsTo(c);return _.y(b,_.ct(a.m),3);case 3:if(a.A){b.F(2);break}return _.y(b,a.m.seek(a.I),2);case 2:a.C=!1;a.h&&a.h.stop();if(a.A){b.F(6);break}return _.y(b,a.m.play(),6);case 6:HT(a,_.sc),_.B(b)}})};_.u.Fm=function(){this.A=!0;this.j.contentComplete()};
_.u.load=function(){var a=this,b,c,d,e,f;return _.I(function(g){if(1==g.a){b=a.m;c=a.G;try{if(typeof c.adTagUrl!==_.ig)throw new _.O(1,9,10001,{missingKeys:"adTagUrl"});}catch(h){return b.onError(h),a.f.resolve(),g["return"](a.f)}return c.adTagUrl?_.y(g,a.J.canPlay(!1),2):(a.f.resolve(),g["return"](a.f))}if(3!=g.a)return d=g.f,_.y(g,a.J.canPlay(!0),3);e=g.f;f=new google.ima.AdsRequest;f.adTagUrl=c.adTagUrl;f.setAdWillAutoPlay(d);f.setAdWillPlayMuted(e);a.j.getSettings().setAutoPlayAdBreaks(!1);a.j.requestAds(f);
return g["return"](a.f)})};_.u.start=function(a){var b=this;return _.I(function(c){return b.a&&b.w&&!b.K?b.w.Ib()?_.y(c,NT(b),0):_.y(c,OT(b,a),0):_.y(c,a.play(),0)})};_.u.Vc=function(){};_.u.Sc=function(){return!0};_.u.resume=function(){this.a&&this.a.resume()};_.u.pause=function(){this.a&&this.a.pause()};_.u.skip=function(){this.a&&this.a.skip()};_.u.getVolume=function(){return this.a?this.a.getVolume():1};_.u.setVolume=function(a){this.a&&this.a.setVolume(a)};
_.u.getPosition=function(){if(!this.a||null===this.o)return-1;var a=this.a.getRemainingTime();return 0>a?0:this.o-a};_.u.sc=function(){this.a&&(this.a.destroy(),this.a=null);JT(this);this.H.release();this.h&&(this.h.stop(),this.h=null);return Promise.resolve()};ET.prototype.getPosition=ET.prototype.getPosition;ET.prototype.setVolume=ET.prototype.setVolume;ET.prototype.getVolume=ET.prototype.getVolume;ET.prototype.skip=ET.prototype.skip;ET.prototype.pause=ET.prototype.pause;ET.prototype.resume=ET.prototype.resume;_.x(PT,_.Gv);_.u=PT.prototype;_.u.onPlayerCreated=function(a){if(QT())return a.onError(new _.O(1,9,1E4));this.f=_.Iq(_.Xd,{"class":"clpp-ima clpp-hidden"});a.getSurface().addElementToContainer(this.f);this.h=new google.ima.AdDisplayContainer(this.f,a.getSurface().getMedia());this.a=new google.ima.AdsLoader(this.h);this.a.getSettings().setPlayerType(_.ta);this.a.getSettings().setPlayerVersion(_.ha);this.a.getSettings().setAutoPlayAdBreaks(!0)};
_.u.onPlayerWillDestroy=function(a){this.a&&(this.a.destroy(),this.a=null);this.h&&(this.h.destroy(),this.h=null);this.f&&(a.getSurface().removeElementFromContainer(this.f),this.f=null)};_.u.xl=function(){return this.a};_.u.vl=function(){return this.h};_.u.cd=function(){return this.f};_.u.id=function(){return"ima"};_.J("clpp.ima.ImaPlugin",PT);PT.prototype.getAdContainer=PT.prototype.cd;PT.prototype.getAdDisplayContainer=PT.prototype.vl;PT.prototype.getAdsLoader=PT.prototype.xl;PT.Id="ima";
PT.isSdkMissing=QT;RT.prototype.create=function(){return new PT};_.gt(new RT);ST.prototype.name=function(){return AT};ST.prototype.a=function(a,b){return a.namespace()===_.zd?!1:QT()?(this.jd.warn("IMA SDK is not loaded."),!1):!(!b||!b.ima)};ST.prototype.create=function(a){return new ET(a)};_.Cq(new ST);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();