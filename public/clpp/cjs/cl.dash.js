(function(){var g={}; var _ = _ || {}
var f=function(window){var vN="Channel parsing failure! Ignoring scheme and value",wN="ContentProtection",xN="EssentialProperty",yN="Failed to parse UTCTiming tags.",zN="Missing \x3cms:pro/\x3e node in ContentProtection element",AN="No UTCTiming elements found.",BN="SegmentBase does not contain sufficient segment information:",CN="SegmentList does not contain sufficient segment information:",DN="SegmentTemplate does not contain sufficient segment information:",EN="SegmentTimeline",FN='The last "S" element cannot have a negative repeat',
GN="duration",HN="http://dashif.org/guidelines/trickmode",IN="http://www.w3.org/1999/xlink",JN='ignoring the last "S" element.',KN='ignoring the remaining "S" elements.',LN="presentationTimeOffset",MN="schemeIdUri",NN="static",ON="timescale",PN="urn:microsoft:playready",QN="urn:mpeg:cenc:2013",RN="urn:mpeg:dash:utc:http-head:2014",SN="urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",TN="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",UN=function(a,b,c){try{var d=a(b);if(d&&d.T&&d.abort)return c.resolve(d.T),
function(){return d.abort()};c.resolve(d);return function(){return Promise.resolve(d).then(function(){})["catch"](function(){})}}catch(e){return c.reject(e),function(){return Promise.resolve()}}},VN=function(a,b,c){function d(){e.reject(new _.O(_.P,7,7001));return a.abort()}var e=new _.mk;a.T.then(function(f){a.a?e.reject(new _.O(_.P,7,7001)):b?d=UN(b,f,e):e.resolve(f)},function(f){c?d=UN(c,f,e):e.reject(f)});return new _.nk(e,function(){return d()})},WN=function(a,b){a.H=Math.max(a.H,b);a.g.debug("notifyAvailabilityTimeOffset: maxAvailabilityTimeOffset\x3d"+
a.H)},XN=function(a,b){return a.reduce(function(c,d,e){return d["catch"](c.bind(null,e))}.bind(null,b),Promise.reject())},YN=function(a){return new _.nk(Promise.reject(a),function(){return Promise.resolve()})},ZN=function(a){return new _.nk(Promise.all(a.map(function(b){return b.T})),function(){return Promise.all(a.map(function(b){return b.abort()}))})},$N=function(a,b,c){return Array.from(a.childNodes).filter(function(d){return d instanceof Element&&d.localName===c&&d.namespaceURI===b})},aO=function(a,
b,c){a=$N(a,b,c);return 1!==a.length?null:a[0]},bO=function(a,b,c){return a.hasAttributeNS(b,c)?a.getAttributeNS(b,c):null},cO=function(a,b,c,d){d=void 0===d?null:d;var e=null;a=a.getAttribute(b);null!=a&&(e=c(a));return null==e?d:e},dO=function(a){if(!a)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a)&&(a+="Z");a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)},eO=function(a){if(!a)return null;var b=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);
if(!b)return _.Hh("Invalid duration string:",a),null;a=31536E3*Number(b[1]||null)+2592E3*Number(b[2]||null)+86400*Number(b[3]||null)+3600*Number(b[4]||null)+60*Number(b[5]||null)+Number(b[6]||null);return isFinite(a)?a:null},fO=function(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=Number(b[1]);if(!isFinite(a))return null;b=Number(b[2]);return isFinite(b)?{start:a,end:b}:null},gO=function(a){a=Number(a);return 0===a%1?a:null},hO=function(a){a=Number(a);return 0===a%1&&0<a?a:null},iO=function(a){a=
Number(a);return 0===a%1&&0<=a?a:null},jO=function(a){var b;a=(b=a.match(/^(\d+)\/(\d+)$/))?Number(b[1])/Number(b[2]):Number(a);return isNaN(a)?null:a},kO=function(a){return a?"true"===a.toLowerCase():!1},lO=function(a){return Array.from(a.childNodes).filter(function(b){return b instanceof Element})},mO=function(a){Array.from(a.childNodes).forEach(function(b){a.removeChild(b)})},nO=function(a,b){Array.from(a.childNodes).forEach(function(c){a.removeChild(c);b.appendChild(c)})},oO=function(a){Array.from(a.attributes).forEach(function(b){b.namespaceURI===
IN&&a.removeAttributeNS(b.namespaceURI,b.localName)})},pO=function(a){var b=void 0===b?1024:b;if(!(a instanceof Uint8Array))return"";if(typeof b!==_.k||0>=b)b=1024;return(a.byteLength>b?a.subarray(0,b):a).toString()},qO=function(a){return 1>=a?0:Math.floor(Math.random()*a)},rO=function(a,b,c,d,e){var f={RepresentationID:b,Number:c,Bandwidth:d,Time:e};return a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(g,h,l,m){if("$$"===g)return"$";var n=f[h];if(null==
n)return _.Hh("URL template does not have an available substitution ","for identifier",'"'+h+'":',a),g;"RepresentationID"===h&&l&&(_.Hh("URL template should not contain a width specifier for identifier",'"RepresentationID":',a),l=void 0);"Time"===h&&(n=Math.round(n));switch(m){case void 0:case "d":case "i":case "u":g=n.toString();break;case "o":g=n.toString(8);break;case "x":g=n.toString(16);break;case "X":g=n.toString(16).toUpperCase();break;default:g=n.toString()}l=window.parseInt(l,10)||1;return Array(Math.max(0,
l-g.length)+1).join("0")+g})},uO=function(a,b){var c=sO(a,b,ON),d=1;c&&(d=hO(c)||1);c=sO(a,b,GN);(c=hO(c||""))&&(c/=d);var e=Number(sO(a,b,LN))||0,f=e/d||0;a.cm&&null!=a.he&&a.he!==f&&(_.Hh("The stream is non-compliant with the DASH spec. The value of `presentationTimeOffset` has changed during the transition from dynamic to static manifest, which is not allowed. The last value will be ignored. (Period ID: "+(a.Ka.id+", Representation ID: ")+(a.O.id+")")),e=a.he*d,f=a.he);var g=sO(a,b,"startNumber"),
h=iO(g||"");if(null==g||null==h)h=1;g=sO(a,b,"endNumber");g=null!==g?iO(g||""):null;var l=tO(a,b,EN),m=null;if(l){m=d;var n=e,p=a.Da.duration||Infinity;l=_.fo(l,"S");for(var q=[],t=0,v=0;v<l.length;++v){var z=l[v],A=cO(z,"t",iO),G=cO(z,"d",iO),E=cO(z,"r",gO);null!=A&&(A-=n);if(!G){_.Hh('"S" element must have a duration:',KN,z);break}A=null!=A?A:t;E=E||0;if(0>E)if(v+1<l.length){E=cO(l[v+1],"t",iO);if(null==E){_.Hh('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:',
KN,z);break}else if(A>=E){_.Hh('An "S" element cannot have a negative repeat if its start ','time exceeds the next "S" element\'s start time:',KN,z);break}E=Math.ceil((E-A)/G)-1}else{if(Infinity===p){_.Hh(FN,"if the Period has an infinite duration:",JN,z);break}else if(A/m>=p){_.Hh(FN,"if its start time exceeds the Period's duration:",JN,z);break}E=Math.ceil((p*m-A)/G)-1}0<q.length&&A!==t&&(Math.abs((A-t)/m)>=_.Sv&&_.Hh("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",
z),q[q.length-1].end=A/m);for(z=0;z<=E;++z)t=A+G,q.push({start:A/m,end:t/m,io:A}),A=t}m=q}n=sO(a,b,"availabilityTimeOffset");p=Number(n||"");p=isNaN(p)?null:p;if(null==n||null==p)p=0;return{timescale:d,La:c,Dc:h,Pf:g,Mb:f,Lg:e,timeline:m,Af:p}},sO=function(a,b,c){return[b(a.O),b(a.wa),b(a.Ka)].filter(_.Ui).map(function(d){return d.getAttribute(c)}).reduce(function(d,e){return d||e})},tO=function(a,b,c){return[b(a.O),b(a.wa),b(a.Ka)].filter(_.Ui).map(function(d){return _.go(d,c)}).reduce(function(d,
e){return d||e})},wO=function(a,b,c,d,e,f){var g=bO(a,IN,"href"),h=bO(a,IN,"actuate")||"onRequest";oO(a);if(5<=f)return YN(new _.O(_.P,4,4028));if("onLoad"!==h)return YN(new _.O(_.P,4,4027));var l=_.aE([d],[g]);d=_.ek(l,b);d.type=1;return VN(e.fetch(d),function(m){m=_.T.$(m.data);m=_.io(m,a.tagName);if(!m)return YN(new _.O(_.P,4,4001,{uri:g}));mO(a);nO(m,a);m=_.w(m.attributes);for(var n=m.next();!n.done;n=m.next())n=n.value,a.setAttributeNS(n.namespaceURI,n.nodeName,n.value);return vO(a,b,c,l[0],
e,f+1)})},vO=function(a,b,c,d,e,f){f=void 0===f?0:f;if(bO(a,IN,"href")){var g=wO(a,b,c,d,e,f);c&&(g=VN(g,void 0,function(){return vO(a,b,c,d,e,f)}));return g}g=[];var h=lO(a);h=_.w(h);for(var l=h.next();!l.done;l=h.next())l=l.value,"urn:mpeg:dash:resolve-to-zero:2013"===bO(l,IN,"href")?a.removeChild(l):l.tagName!==EN&&g.push(vO(l,b,c,d,e,f));return VN(ZN(g),function(){return a})},xO=function(a,b,c){var d=a.Da.duration,e=a.Da.ki;if(!a.Of)return e=new _.bF(b),_.yE(e,d),e;var f=a.Ka;var g=a.O;f=f&&f.id&&
g&&g.id?f.id+","+g.id:null;if(!a.pi||null==c[f])return a=new _.bF(b),e||_.yE(a,d),c[f]=a;c=c[f];e||_.yE(new _.bF(b),d);c.qa(b);_.dF(c,_.QE(a.presentationTimeline)-a.Da.start);return c},yO=function(a,b){var c=a.presentationTimeline,d=_.eh(b.a).concat();c.l||0===d.length||(c.J=Math.floor(Math.max(c.J||0,d[d.length-1].endTime+a.Da.start)));a.pi||_.NE(a.presentationTimeline,_.eh(b.a).concat(),a.Da.start)},zO=function(a){return""===a.id?a.schemeIdUri+":"+a.startTime+":"+a.endTime:a.id},BO=function(a,b,
c,d){var e,f=(new _.qn).X("sidx",function(h){e=AO(b,d,c,h)});a&&f.parse(a);if(e)return e;f=b+"-"+(b+a.byteLength-1);var g=c[0];a=_.Fj(a);_.Nh('Invalid box type. Expected "sidx", but received:',a,"from:",g,"byte range:",f);throw new _.O(_.P,3,3004,{url:g,Go:f,size:a.byteLength,Zo:pO(a)});},AO=function(a,b,c,d){var e=[];d.reader.skip(4);var f=_.ln(d.reader);if(0===f)throw _.Nh("Invalid timescale."),new _.O(_.P,3,3005);if(0===d.version){var g=_.ln(d.reader);var h=_.ln(d.reader)}else g=_.nn(d.reader),
h=_.nn(d.reader);d.reader.skip(2);var l=_.kn(d.reader);a=a+d.size+h;for(h=0;h<l;h++){var m=_.ln(d.reader),n=(m&2147483648)>>>31;m&=2147483647;var p=_.ln(d.reader);d.reader.skip(4);if(1===n)throw _.Nh("Hierarchical SIDXs are not supported."),new _.O(_.P,3,3006);e.push(new _.uj(e.length,g/f-b,(g+p)/f-b,function(){return c},a,a+m-1,b));g+=p;a+=m}d.parser.stop();return e},CO=function(a){this.f=a;this.a=new _.fn(a,!1)},GO=function(a){var b=DO(a);if(7<b.length)throw new _.O(_.P,3,3002);for(var c=0,d=0;d<
b.length;d++)c=256*c+b[d];b=c;c=DO(a);a:{d=_.w(EO);for(var e=d.next();!e.done;e=d.next())if(_.Uj(c,new Uint8Array(e.value))){d=!0;break a}d=!1}if(d)c=a.f.byteLength-a.a.getPosition();else{if(8===c.length&&c[1]&224)throw new _.O(_.P,3,3001);d=c[0]&(1<<8-c.length)-1;for(e=1;e<c.length;e++)d=256*d+c[e];c=d}c=a.a.getPosition()+c<=a.f.byteLength?c:a.f.byteLength-a.a.getPosition();d=new DataView(a.f.buffer,a.f.byteOffset+a.a.getPosition(),c);a.a.skip(c);return new FO(b,d)},DO=function(a){var b=_.jn(a.a),
c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new _.O(_.P,3,3002);var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=_.jn(a.a);return d},FO=function(a,b){this.id=a;this.a=b},HO=function(a){if(8<a.a.byteLength)throw new _.O(_.P,3,3002);if(8===a.a.byteLength&&a.a.getUint8(0)&224)throw new _.O(_.P,3,3001);for(var b=0,c=0;c<a.a.byteLength;c++){var d=a.a.getUint8(c);b=256*b+d}return b},IO=function(){},KO=function(a,b,c,d,e,f){function g(){return e}var h=[];a=new CO(a.a);for(var l=null,m=null;_.gn(a.a);){var n=
GO(a);if(187===n.id){var p=JO(n);p&&(n=c*p.jo,p=b+p.Dn,null!=l&&h.push(new _.uj(h.length,l-f,n-f,g,m,p-1,f)),l=n,m=p)}}null!=l&&h.push(new _.uj(h.length,l-f,d-f,g,m,null,f));return h},JO=function(a){var b=new CO(a.a);a=GO(b);if(179!==a.id)throw _.Hh("Not a CueTime element."),new _.O(_.P,3,3013);a=HO(a);b=GO(b);if(183!==b.id)throw _.Hh("Not a CueTrackPositions element."),new _.O(_.P,3,3012);b=new CO(b.a);for(var c=0;_.gn(b.a);){var d=GO(b);if(241===d.id){c=HO(d);break}}return{jo:a,Dn:c}},LO=function(a,
b){var c=tO(a,b,"Initialization");if(!c)return null;var d=a.O.ra,e=c.getAttribute("sourceURL")||void 0;e&&(d=_.aE(a.O.ra,[e]));var f=0,g=null;if(c=cO(c,"range",fO))f=c.start,g=c.end;return new _.cE(function(){return d},f,g,null,null,e,a.O.Na)},OO=function(a,b){var c=Number(sO(a,MO,LN))||0,d=sO(a,MO,ON),e=1;d&&(e=hO(d)||1);c=c/e||0;d=LO(a,MO);e=a.O.mimeType.split("/")[1];if(a.O.contentType!==_.Q&&"mp4"!==e&&"webm"!==e)throw _.Nh("SegmentBase specifies an unsupported container type.",a.O),new _.O(_.P,
4,4006);if("webm"===e&&!d)throw _.Nh(BN,"the SegmentBase uses a WebM container,","but does not contain an Initialization element.",a.O),new _.O(_.P,4,4005);var f=tO(a,MO,"RepresentationIndex"),g=sO(a,MO,"indexRange"),h=a.O.ra;g=fO(g||"");if(f){var l=f.getAttribute("sourceURL");l&&(h=_.aE(a.O.ra,[l]));g=cO(f,"range",fO,g)}if(!g)throw _.Nh(BN,"the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",a.O),new _.O(_.P,4,4002);a.presentationTimeline.B=null;e=NO(a,b,d,h,g.start,
g.end,e,c);return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,adjustSegmentDurations:e.adjustSegmentDurations,getDuration:e.getDuration,initSegmentReference:d,getLastSegmentEndTime:e.getLastSegmentEndTime,Ea:c}},NO=function(a,b,c,d,e,f,g,h){var l=a.presentationTimeline,m=!a.Of||!a.Da.ki,n=a.Da.start,p=a.Da.duration,q=b,t=null;return{createSegmentIndex:function(v){var z,A,G,E,C,H;return _.I(function(M){if(1==M.a)return z=
[q(d,e,f,v),"webm"===g?q(c.Xa(),c.za,c.ma,v):null],q=null,_.y(M,Promise.all(z),2);A=M.f;G=A[0];E=A[1]||null;C=null;"mp4"===g?C=BO(G,e,d,h):(H=new IO,C=H.parse(G,E,d,h));_.NE(l,C,n);t=new _.bF(C);m&&_.yE(t,p);return M["return"](A)})},findSegmentPosition:function(v){return t.Wc(v)},getSegmentReference:function(v){return t.get(v)},adjustSegmentDurations:function(v,z){return t.wd(v,z)},getDuration:function(){return t.getDuration()},getLastSegmentEndTime:function(){return p}}},MO=function(a){return a.oe},
VO=function(a,b,c,d){var e=PO(a),f=QO(a);RO(a,f);var g=null;if(f.ce)a.presentationTimeline.B=null,g=SO(a,b,e,f);else if(f.La)d||(a.presentationTimeline.B=null,WN(a.presentationTimeline,f.Af),_.OE(a.presentationTimeline,f.La),_.LE(a.presentationTimeline,a.Da.start)),g=TO(a,f);else{b=UO(a,f);var h=xO(a,b,c);yO(a,h);g={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:h.Wc.bind(h),getSegmentReference:h.get.bind(h),adjustSegmentDurations:h.wd.bind(h),getDuration:h.getDuration.bind(h),
getLastSegmentEndTime:function(){return _.cF(h)}}}return{createSegmentIndex:g.createSegmentIndex,findSegmentPosition:g.findSegmentPosition,getSegmentReference:g.getSegmentReference,adjustSegmentDurations:g.adjustSegmentDurations,getDuration:g.getDuration,initSegmentReference:e,getLastSegmentEndTime:g.getLastSegmentEndTime,Ea:f.Mb}},WO=function(a){return a.mc},QO=function(a){var b=uO(a,WO),c=sO(a,WO,"media");a=sO(a,WO,"index");return{La:b.La,timescale:b.timescale,Dc:b.Dc,Pf:b.Pf,Mb:b.Mb,Lg:b.Lg,timeline:b.timeline,
ag:c,ce:a,Af:b.Af}},RO=function(a,b){var c=b.ce?1:0;c+=b.timeline?1:0;c+=b.La?1:0;if(0===c)throw _.Nh("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",a.O),new _.O(_.P,4,4002);1!==c&&(_.Hh("SegmentTemplate contains multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",a.O),b.ce?(_.Lh("Using the index URL template by default."),
b.timeline=null):_.Lh("Using the SegmentTimeline by default."),b.La=null);if(!b.ce&&!b.ag)throw _.Nh(DN,"the SegmentTemplate's media URL template is missing.",a.O),new _.O(_.P,4,4002);},SO=function(a,b,c,d){var e=a.O.mimeType.split("/")[1];if("mp4"!==e&&"webm"!==e)throw _.Nh("SegmentTemplate specifies an unsupported container type.",a.O),new _.O(_.P,4,4006);if("webm"===e&&!c)throw _.Nh(DN,"the SegmentTemplate uses a WebM container,","but does not contain an initialization URL template.",a.O),new _.O(_.P,
4,4005);var f=rO(d.ce,a.O.id,null,a.bandwidth||null,null);f=_.aE(a.O.ra,[f]);return NO(a,b,c,f,0,null,e,d.Mb)},TO=function(a,b){var c=b.ag,d=a.Da.duration,e=b.La,f=b.Dc,g=b.Pf,h=b.timescale,l=a.bandwidth||null,m=a.O.id,n=a.O.ra,p=a.O.Na;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(q){return 0>q||d&&q>=d?null:Math.floor(q/e)},getSegmentReference:function(q){var t=q+f;if(null!==g&&t>g)return null;var v=q*e,z=v+e;d&&(z=Math.min(z,d));if(0>z||d&&v>=d)return null;
var A=rO(c,m,t,l,v*h);return new _.uj(q,v,z,function(){return _.aE(n,[A])},0,null,b.Mb,null,null,null,null,null,null,null,null,A,p)},adjustSegmentDurations:function(){},getDuration:function(){return d},getLastSegmentEndTime:function(){return d}}},UO=function(a,b){var c=b.ag,d=b.timeline;if(0===d.length)return[];for(var e=[],f={},g=0;g<d.length;f={pf:f.pf,xe:f.xe},g++){var h=g+b.Dc,l=d[g].io+b.Lg,m=a.O.id,n=a.bandwidth||null;f.pf=a.O.ra;f.xe=rO(c,m,h,n,l);e.push(new _.uj(h,d[g].start,d[g].end,function(p){return function(){return _.aE(p.pf,
[p.xe])}}(f),0,null,b.Mb,null,null,null,null,null,null,null,null,f.xe,a.O.Na))}return e},PO=function(a){var b=sO(a,WO,"initialization");if(!b)return null;var c=a.O.ra,d=rO(b,a.O.id,null,a.bandwidth||null,null);return new _.cE(function(){return _.aE(c,[d])},0,null,null,null,d,a.O.Na)},aP=function(a,b){var c=LO(a,XO),d=YO(a);ZO(a,d);var e=$O(a.Da.duration,d.Dc,a.O.ra,a.O.Na,d),f=xO(a,e,b);yO(a,f);return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:f.Wc.bind(f),getSegmentReference:f.get.bind(f),
adjustSegmentDurations:f.wd.bind(f),getDuration:f.getDuration.bind(f),initSegmentReference:c,getLastSegmentEndTime:function(){return _.cF(f)},Ea:d.Mb}},XO=function(a){return a.lc},YO=function(a){var b=bP(a);a=uO(a,XO);var c=a.Dc;0===c&&(_.Hh("SegmentList@startNumber must be \x3e 0"),c=1);var d=0;a.La?d=a.La*(c-1):a.timeline&&0<a.timeline.length&&(d=a.timeline[0].start);return{La:a.La,startTime:d,Dc:c,Mb:a.Mb,timeline:a.timeline,Bc:b}},ZO=function(a,b){if(!b.La&&!b.timeline&&1<b.Bc.length)throw _.Hh(CN,
"the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",a.O),new _.O(_.P,4,4002);if(!b.La&&!a.Da.duration&&!b.timeline&&1===b.Bc.length)throw _.Hh(CN,"the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",a.O),new _.O(_.P,4,4002);if(b.timeline&&0===b.timeline.length)throw _.Hh(CN,"the SegmentList has an empty timeline.",a.O),new _.O(_.P,4,4002);},$O=function(a,b,c,d,e){var f=e.Bc.length;e.timeline&&
e.timeline.length!==e.Bc.length&&(f=Math.min(e.timeline.length,e.Bc.length),_.Hh("The number of items in the segment timeline and the number of","segment URLs do not match, truncating",e.Bc.length,"to",f));for(var g=[],h=e.startTime,l={},m=0;m<f;l={uf:l.uf},m++){var n=e.Bc[m];l.uf=_.aE(c,[n.si]);var p=void 0;p=null!=e.La?h+e.La:e.timeline?e.timeline[m].end:h+a;g.push(new _.uj(m+b,h,p,function(q){return function(){return q.uf}}(l),n.start,n.end,e.Mb,null,null,null,null,null,null,null,null,n.si,d));
h=p}return g},bP=function(a){return[a.O.lc,a.wa.lc,a.Ka.lc].filter(_.Ui).map(function(b){return _.fo(b,"SegmentURL")}).reduce(function(b,c){return 0<b.length?b:c}).map(function(b){b.getAttribute("indexRange")&&!a.Wf&&(a.Wf=!0,_.Hh("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate."));var c=b.getAttribute("media");b=cO(b,"mediaRange",fO,{start:0,end:null});return{si:c,start:b.start,end:b.end}})},
cP=function(a,b){this.g=a;this.f=b;this.a={clockSyncUri:void 0}},eP=function(a,b,c,d){var e,f;return _.I(function(g){switch(g.a){case 1:return e=_.fo(b,"UTCTiming"),_.D(g,2),_.y(g,dP(a,c,e),4);case 4:f=g.f;d.I=f;a.g.info("Clock synchronized. The difference between server and client clock was "+(f+" ms."));_.sh(g,3);break;case 2:_.F(g),a.g.warn("Failed to synchronize clocks. This content may not play on clients with bad clocks!");case 3:return g["return"](d)}})},dP=function(a,b,c){c=c.map(function(e){return{scheme:e.getAttribute(MN),
value:e.getAttribute(_.Bg)}});var d=a.a.clockSyncUri;!c.length&&d&&(a.g.info("No UTCTiming elements found, falling back on clockSyncUri from config to synchronize clocks."),c.push({scheme:RN,value:d}));return 0===c.length?(a.g.warn(AN),Promise.reject(Error(AN))):XN(c,function(e){var f=e.scheme;e=e.value;switch(f){case RN:case "urn:mpeg:dash:utc:http-head:2012":return fP(a,b,e,"HEAD");case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":return fP(a,
b,e,"GET");case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":var g=Date.parse(e);return isNaN(g)?(a.g.warn("Invalid date for scheme "+f+", value: "+e),Promise.reject()):Promise.resolve(g-Date.now());case "urn:mpeg:dash:utc:http-ntp:2014":case "urn:mpeg:dash:utc:ntp:2014":case "urn:mpeg:dash:utc:sntp:2014":return a.g.warn("NTP UTCTiming scheme is not supported"),Promise.reject();default:return a.g.warn("Unrecognized scheme in UTCTiming element",f),Promise.reject()}})["catch"](function(){a.g.warn(yN);
return Promise.reject(Error(yN))})},fP=function(a,b,c,d){var e,f,g,h;return _.I(function(l){if(1==l.a)return e=_.aE(b,[c]),_.y(l,a.f(e,d),2);f=l.f;if("HEAD"===d){if(!f.headers||!f.headers.date)throw a.g.warn("UTC timing response is missing","expected date header"),Error("Date HTTP header missing.");g=f.headers.date}else g=_.T.$(f.data);h=Date.parse(g);if(isNaN(h))throw a.g.warn("Unable to parse date from UTC timing response"),Error("Date value invalid.");return l["return"](h-Date.now())})},hP=function(a,
b){return a.find(function(c){return gP.get(c.$b)===b})},jP=function(a){var b=aO(a.node,PN,"pro");if(!b||!b.textContent)return iP.warn(zN,a),null;a=_.Rj(b.textContent);a=_.zo(a);a=_.mo(a.a);return{keyId:null,$b:TN,node:document.createElement("null"),init:[{initData:_.PD(a),initDataType:_.qd,keyId:null}]}},kP=function(a,b){b=void 0===b?"4.0.0.0":b;var c=aO(a.node,QN,"pssh");if(!c)return null;c=_.Rj(c.textContent||"");c=_.no(c);return c?(c=_.QD(b,c.a))?{keyId:null,$b:SN,node:document.createElement("null"),
init:[{initData:_.PD(c),initDataType:_.qd,keyId:null}]}:null:(_.Hh("Unable to parse WV PSSH data. Can not create PR data!"),null)},lP=function(a,b){var c=aO(a.node,PN,"pro");if(!c||!c.textContent)return _.Hh(zN,a),null;c=_.Rj(c.textContent);c=_.zo(c);return c.version!==b&&(_.Mh("Parsing from "+c.version+" to "+b+"."),c=_.RD(c,b))?{keyId:null,$b:SN,node:document.createElement("null"),init:[{initData:_.PD(c),initDataType:_.qd,keyId:null}]}:null},oP=function(a,b,c,d){var e=mP(a),f=null;a=[];var g=[],
h=hP(e,_.Od),l=hP(e,_.Md);if(l&&d){var m=lP(l,d);m&&(e[e.indexOf(l)]=m)}l&&!h&&(m=jP(l))&&e.push(m);h&&!l&&(d=kP(h,d||void 0))&&e.push(d);d=new Set(e.map(function(n){return n.keyId}));d["delete"](null);if(1<d.size)throw new _.O(_.P,4,4010);b||(g=e.filter(function(n){return"urn:mpeg:dash:mp4protection:2011"===n.$b?(f=n.init||f,!1):!0}),g.length&&(a=nP(f,g,c),0===a.length&&(a=[_.bE(_.We,f,c)])));if(e.length&&(b||!g.length))for(a=[],b=_.w(gP.values()),e=b.next();!e.done;e=b.next())e=e.value,e!==_.ff&&
a.push(_.bE(e,f,c));if(c=Array.from(d)[0]||null)for(b=_.w(a),e=b.next();!e.done;e=b.next())for(e=_.w(e.value.initData),g=e.next();!g.done;g=e.next())g.value.keyId=c;return{Md:c,Lo:f,drmInfos:a,Nh:!0}},pP=function(a,b,c,d,e){var f=oP(a,c,d,e);if(b.Nh){a=1===b.drmInfos.length&&!b.drmInfos[0].keySystem;c=0===f.drmInfos.length;if(0===b.drmInfos.length||a&&!c)b.drmInfos=f.drmInfos;b.Md=f.Md||b.Md;b.Nh=!1}else if(0<f.drmInfos.length&&(b.drmInfos=b.drmInfos.filter(function(g){return f.drmInfos.some(function(h){return h.keySystem===
g.keySystem})}),0===b.drmInfos.length))throw new _.O(_.P,4,4008);return f.Md||b.Md},qP=function(a){a=$N(a.node,"https://dashif.org/CPS","Laurl").map(function(b){return b.textContent}).filter(Boolean);return 0===a.length?null:1===a.length?a[0]:a[qO(a.length)]},nP=function(a,b,c){var d=[];b=_.w(b);for(var e=b.next();!e.done;e=b.next()){var f=e.value,g=gP.get(f.$b);if(g){e=_.bE(g,f.init||a,c);if(g=rP.get(g))(f=g(f))?(e.licenseServerUri=f.licenseUrl,e.licenseServerUriOrigin=f.origin):e.licenseServerUri=
"";d.push(e)}}return d},mP=function(a){var b=[];a=_.w(a);for(var c=a.next();!c.done;c=a.next())(c=sP(c.value))&&b.push(c);return b},sP=function(a){var b=a.getAttribute(MN),c=bO(a,QN,"default_KID"),d=$N(a,QN,"pssh").map(_.ho),e=aO(a,PN,"pro");if(!b)return _.Nh("Missing required schemeIdUri attribute on","ContentProtection element",a),null;b=b.toLowerCase();if(c&&(c=c.replace(/-/g,"").toLowerCase(),c.includes(" ")))throw new _.O(_.P,4,4009);var f=[];try{if(f=d.map(function(l){return{initDataType:_.qd,
initData:_.Rj(l),keyId:null}}),0===f.length&&e&&e.textContent)try{var g=_.Rj(e.textContent),h=_.zo(g);f.push({initDataType:_.qd,initData:_.PD(h),keyId:null})}catch(l){_.Hh("Unable to parse ms:pro payload",l),f=[]}}catch(l){throw new _.O(_.P,4,4007);}return{node:a,$b:b,keyId:c,init:0<f.length?f:null}},tP=function(){var a=this;this.D=this.a=null;this.l=[];this.f=null;this.G=[];this.w=1;this.H={};this.j=0;this.I=new _.AE(5);this.A=new _.xl(function(){a.Yb()});this.o=new _.sk;this.h=new Map;this.g=new _.K("clpp.dash.DashParser");
this.B=null;this.J=new cP(this.g,function(b,c){var d=_.ek(b,a.a.attemptParameters);d.type=5;d.method=c;d=a.D.networkingEngine.fetch(d);_.tk(a.o,d);return d.T});this.C=new Map;this.K=!1},vP=function(a){var b,c,d,e,f,g,h,l,m;return _.I(function(n){if(1==n.a)return b=_.ek(a.l,a.a.attemptParameters),b.type=1,c=a.D.networkingEngine,d=Date.now(),e=c.fetch(b),_.tk(a.o,e),_.y(n,e.T,2);if(3!=n.a){f=n.f;if(!a.D)return n["return"](0);f.uri&&!a.l.includes(f.uri)&&a.l.unshift(f.uri);g=null!=a.f;return _.y(n,uP(a,
f.data,f.uri),3)}h=n.f;l=Date.now();m=(l-d)/1E3;_.BE(a.I,1,m);if(g&&a.D.onUpdate)a.D.onUpdate(h.manifest);if(h.fo){if(a.D.onTurnedStatic)a.D.onTurnedStatic();a.D.onEvent(new _.L(_.Ue))}return n["return"](m)})},uP=function(a,b,c){var d,e,f,g,h;return _.I(function(l){if(1==l.a){d=_.T.$(b);e=_.io(d,"MPD");if(!e)throw new _.O(_.P,4,4001,c);f=a.a.xlinkFailGracefully;g=vO(e,a.a.attemptParameters,f,c,a.D.networkingEngine);_.tk(a.o,g);return _.y(l,g.T,2)}h=l.f;return l["return"](wP(a,h,c))})},xP=function(a,
b,c){if(a.length){c=c||"__clpp_baseUriCollection_\n        "+b.length;var d=[];a.forEach(function(e){var f=e.getAttribute("serviceLocation");e=_.ho(e);f&&e&&d.push({serviceLocationId:f,uri:e,params:{}})});if(d.length)return a=new _.LF(c,d),b.push(a),a}return null},wP=function(a,b,c){var d,e,f,g,h,l,m,n,p,q,t,v,z,A,G,E,C,H,M,R;return _.I(function(V){if(1==V.a){d=[];e=[c];f=_.fo(b,"Location");g=f.map(_.ho).filter(_.Ui);0<g.length&&(h=_.aE(e,g),e=a.l=h,xP(f,d,"Location"));l=_.fo(b,"BaseURL");m=l.map(_.ho);
n=_.aE(e,m);xP(l,d,"BaseURL");p=b.getAttribute("type")||NN;a.j=cO(b,"minimumUpdatePeriod",eO,-1);p===NN&&0<=a.j&&(a.g.warn("Invalid manifest - a static manifest should not contain the `minimumUpdatePeriod` attribute. The attribute will be ignored."),a.j=-1,a.A.stop());q=cO(b,"maxSegmentDuration",eO);if(t=p===NN&&"dynamic"===a.B)a.g.info("MPD dynamic to static transition."),p="dynamic";v=p===NN;z="dynamic"===p;if(a.f)var S=a.f.presentationTimeline;else{S=a.a.timeline||{};var Ba=cO(b,"suggestedPresentationDelay",
eO),Ca=cO(b,"minBufferTime",eO,0);Ba=null!=a.a.suggestedPresentationDelay?a.a.suggestedPresentationDelay:a.a.lowLatencyMode?0:null!=Ba?Ba:3*Ca;Ca=cO(b,"availabilityStartTime",dO);S=new _.GE(S,Ca,Ba,v,!!a.a.autoCorrectDrift,!!a.a.lowLatencyMode);S=v?S:eP(a.J,b,n,S)}return _.y(V,S,2)}A=V.f;S=cO(b,"timeShiftBufferDepth",eO);G=z&&a.a.availabilityWindowOverride&&!isNaN(a.a.availabilityWindowOverride)?a.a.availabilityWindowOverride:null===S?Infinity:S;A.A=G;if(!a.D)throw new _.O(_.P,7,7001);E={Of:z,pi:null!=
a.f,presentationTimeline:A,Ka:null,Da:null,wa:null,O:null,bandwidth:0,Wf:!1,cm:t,Dg:null,he:null};C=yP(a,E,n,d,b);H=C.duration;M=C.periods;t&&(zP(M,E),A.C=!0);if(v||!t&&!C.Gh)A.f=H||Infinity,H&&_.FE(A.a,0,H);_.OE(A,q||1);A.isLive();if(!a.f){a.f={presentationTimeline:A,periods:M,minBufferTime:0,cues:[]};a:{if(Ca=_.go(b,"ContentSteering"))if(S=Ca.getAttribute("defaultServiceLocation")||"",Ba=_.ho(Ca)){Ca=cO(Ca,"queryBeforeStart",kO,!1);S={manifestType:_.Sc,contentSteeringServerUri:Ba,defaultServiceLocation:S,
queryBeforeStart:Ca||!1,baseUriCollections:[]};break a}S=null}if(R=S)a.f.contentSteering=R,a.f.contentSteering.baseUriCollections=d}a.f.cues=C.cues;a.B=p;return V["return"]({manifest:a.f,fo:t})})},yP=function(a,b,c,d,e){var f=cO(e,"mediaPresentationDuration",eO),g=a.f?a.f.periods[a.f.periods.length-1]||null:null,h=[],l=[],m=0;e=_.fo(e,"Period");for(var n=0;n<e.length;n++){var p=e[n];m=cO(p,_.eg,eO,m);var q=cO(p,GN,eO),t=null;if(n!==e.length-1){var v=cO(e[n+1],_.eg,eO);null!=v&&(t=v-m)}else null!=
f&&(t=f-m);v=_.Sv;t&&q&&Math.abs(t-q)>v&&a.g.warn("There is a gap/overlap between Periods",p);null==t&&(t=q);p=AP(a,b,c,d,{start:m,duration:t,node:p,ki:null==t||n===e.length-1});q=p.Ka;l.push(q);h=h.concat(p.cues);a.G.includes(q.id)||(a.G.push(q.id),a.f&&(a.D.filterNewPeriod(q),a.f.periods.push(q)));if(null==t){n!==e.length-1&&a.g.warn("Skipping Period",n+1,"and any subsequent Periods:","Period",n+1,"does not have a valid start time.",l[n+1]);m=null;break}m+=t}null==a.f&&a.D.filterAllPeriods(l);g&&
(b=l.find(function(z){return z.id===g.id}))&&(g.endTime=b.endTime);h=BP(a,h);return null!=f?(m!==f&&a.g.warn("@mediaPresentationDuration does not match the total duration of ","all Periods."),{periods:l,duration:f,Gh:!1,cues:h}):{periods:l,duration:m,Gh:!0,cues:h}},BP=function(a,b){var c=new Set(b.map(zO));a.h.forEach(function(d,e){c.has(e)||a.h["delete"](e)});b.forEach(function(d){var e=zO(d);a.h.has(e)||a.h.set(e,d)});return Array.from(a.h.values())},AP=function(a,b,c,d,e){b.Ka=CP(a,e.node,null,
c,d);b.Da=e;c=b.Ka.id||"__clpp_period_"+e.start;b.Ka.id||(a.g.info("No Period ID given for Period with start time "+e.start+(",  Assigning a default: "+c+".")),b.Ka.id=c);d=_.fo(e.node,"EventStream").flatMap(function(t){return DP(a,e.start,e.duration,t)});var f=_.fo(e.node,_.ia).map(function(t){return EP(a,b,t)}).filter(_.Ui);if(b.Of){for(var g=[],h=_.w(f),l=h.next();!l.done;l=h.next()){l=_.w(l.value.Hn);for(var m=l.next();!m.done;m=l.next())g.push(m.value)}if(g.length!==(new Set(g)).size)throw new _.O(_.P,
4,4018);}g=f.filter(function(t){return!t.Jg});h=f.filter(function(t){return t.Jg});h=_.w(h);for(l=h.next();!l.done;l=h.next()){m=l.value;m.streams.forEach(function(t){t.trickPlay=!0});l=m.streams[0];m=m.Jg;for(var n=_.w(g),p=n.next();!p.done;p=n.next())if(p=p.value,m.includes(p.id)){p=_.w(p.streams);for(var q=p.next();!q.done;q=p.next())q.value.trickModeVideo=l}}h=FP(f,_.r);l=FP(g,_.Zc);if(!h.length&&!l.length)throw new _.O(_.P,4,4004);l.length||(l=[null]);h.length||(h=[null]);f=[];l=_.w(l);for(m=
l.next();!m.done;m=l.next())for(m=m.value,n=_.w(h),p=n.next();!p.done;p=n.next())GP(a,m,p.value,f);l=_.eh(FP(g,_.Q)).concat(_.eh(FP(g,_.lg)));h=[];l=_.w(l);for(m=l.next();!m.done;m=l.next())h.push.apply(h,m.value.streams);m=FP(g,_.ye);l=[];m=_.w(m);for(n=m.next();!n.done;n=m.next())l.push.apply(l,n.value.streams);g=HP(e,g);return{Ka:{id:c,configurationId:a.D.configurationId,startTime:e.start,endTime:g,textStreams:h,thumbStreams:l,variants:f},cues:d}},HP=function(a,b){if(null!==a.duration)return a.start+
a.duration;if(0<b.length){var c=b.filter(function(d){return 0<d.streams.length}).map(function(d){return d.streams}).flat().filter(function(d){return d.getLastSegmentEndTime}).map(function(d){return d.getLastSegmentEndTime()});return 0<c.length?a.start+Math.min.apply(Math,_.eh(c)):null}return null},FP=function(a,b){return a.filter(function(c){return c.contentType===b})},GP=function(a,b,c,d){var e;if(b||c)if(b&&c){if(_.Ep(b.drmInfos,c.drmInfos)){var f=_.Dp(b.drmInfos,c.drmInfos),g=_.w(b.streams);for(e=
g.next();!e.done;e=g.next()){var h=e.value,l=_.w(c.streams);for(e=l.next();!e.done;e=l.next()){var m=e.value;e=(m.bandwidth||0)+(h.bandwidth||0);e={id:a.w++,language:b.language,primary:b.$f||c.$f,audio:h,video:m,bandwidth:e,drmInfos:f,allowedByApplication:!0,allowedByKeySystem:!0};d.push(e)}}}}else for(f=b||c,g=_.w(f.streams),e=g.next();!e.done;e=g.next())h=e.value,e=h.bandwidth||0,e={id:a.w++,language:f.language||_.ug,primary:f.$f,audio:b?h:null,video:c?h:null,bandwidth:e,drmInfos:f.drmInfos,allowedByApplication:!0,
allowedByKeySystem:!0},d.push(e)},EP=function(a,b,c){b.wa=CP(a,c,b.Ka,null,null);var d=!1,e=_.fo(c,"Role"),f=e.map(function(C){return C.getAttribute(_.Bg)}).filter(_.Ui),g=null,h=_.fo(c,"Label").map(function(C){return C.textContent}).filter(_.Ui);h&&0<h.length&&(g=h[h.length-1]);var l=void 0;(h=b.wa.contentType===_.Q)&&(l=_.lg);e=_.w(e);for(var m=e.next();!m.done;m=e.next()){m=m.value;var n=m.getAttribute(MN);if(null==n||"urn:mpeg:dash:role:2011"===n||"urn:mpeg:dash:role"===n)switch(m=m.getAttribute(_.Bg),
m){case _.Me:d=!0;break;case _.md:case _.lg:l=m;break;case "forced-subtitle":case "forced_subtitle":case _.se:l=_.se}}m=_.fo(c,xN);e=null;m=_.w(m);for(var p=m.next();!p.done;p=m.next()){p=p.value;n=p.getAttribute(MN)||"";p=p.getAttribute(_.Bg);if(n!==HN&&!IP.includes(n)||void 0===p)return null;n===HN&&(0===p.length&&(e=null),e=p.split(" "))}m=_.fo(c,"Accessibility");var q=new Map;n=_.w(m);for(p=n.next();!p.done;p=n.next()){var t=p.value;p=t.getAttribute(MN);if("urn:scte:dash:cc:cea-608:2015"===p||
"urn:scte:dash:cc:cea-708:2015"===p)if(p=1,t=t.getAttribute(_.Bg),null!=t){t=_.w(t.split(";"));for(var v=t.next();!v.done;v=t.next()){var z=v.value,A=v=void 0;z.includes("\x3d")?(z=z.split("\x3d"),v=z[0].startsWith("CC")?z[0]:"CC"+z[0],A=z[1].split(",")[0].split(":").pop()):(v="CC"+p,p+=2,A=z);q.set(v,_.wj(A))}}else q.set("CC1",_.ug)}n=_.fo(c,wN);var G=oP(n,a.a.ignoreDrmInfo,b.Ka.id,a.a.playreadyVersion||null),E=c.getAttribute("lang")||_.ug;n=_.wj(E);null==g&&(g=c.getAttribute("label"));p=_.fo(c,
_.Pb);c=p.map(function(C){return JP(a,b,G,l,E,g,d,f,q,C)}).filter(_.Ui);if(0===c.length){if(h)return null;throw new _.O(_.P,4,4003);}if(!b.wa.contentType||b.wa.contentType===_.Qc)for(b.wa.contentType=KP(c[0].mimeType,c[0].codecs),h=_.w(c),t=h.next();!t.done;t=h.next())t.value.type=b.wa.contentType;h=_.w(c);for(t=h.next();!t.done;t=h.next())for(t=t.value,v=_.w(G.drmInfos),z=v.next();!z.done;z=v.next())z=z.value,t.keyId&&!z.keyIds.includes(t.keyId)&&z.keyIds.push(t.keyId);c=LP(c,b.wa.contentType,m);
h=p.map(function(C){return C.getAttribute("id")}).filter(_.Ui);return{id:b.wa.id||"__fake__"+a.w++,contentType:b.wa.contentType,language:n,originalLanguage:E,$f:d,streams:c,drmInfos:G.drmInfos,Jg:e,Hn:h}},LP=function(a,b,c){var d=b===_.lg?_.Q:b;b=c.map(function(f){return{scheme:f.getAttribute(MN)||"",id:f.getAttribute("id")||void 0,value:f.getAttribute(_.Bg)||"",protocol:"DASH",type:d}});c=_.w(a);for(var e=c.next();!e.done;e=c.next())e.value.accessibility=b;return a},JP=function(a,b,c,d,e,f,g,h,l,
m){var n=_.wj(e);b.O=CP(a,m,b.wa,null,null);if(!MP(a,b.O))return a.g.warn("Skipping Representation",b.O),null;b.Dg=b.Ka.id+" "+b.O.id;b.he=a.C.get(b.Dg);b.bandwidth=cO(m,"bandwidth",hO)||0;var p=NP(a,b);if(!p)return null;a.C.set(b.Dg,p.Ea);var q=_.fo(m,wN);a=pP(q,c,a.a.ignoreDrmInfo,b.Ka.id,a.a.playreadyVersion||null);q=!1;_.fo(m,"SupplementalProperty").some(function(A){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"===A.getAttribute(MN)&&"JOC"===A.getAttribute(_.Bg)})&&(b.O.mimeType="audio/eac3-joc",
q=!0);var t=void 0;if(b.O.contentType===_.ye){var v=(m=_.go(m,xN))&&m.getAttribute(MN);if(OP.includes(v||"")&&(m=_.Bj(m.getAttribute(_.Bg)||""))&&(p.horizontalTiles=m.Yd,p.verticalTiles=m.re,b.wa.mc)){v=cO(b.wa.mc,GN,iO)||0;var z=cO(b.wa.mc,ON,iO)||1;(v/=z)&&(t=v/m.ao)}}return{id:_.kL++,originalId:b.O.id,createSegmentIndex:p.createSegmentIndex,findSegmentPosition:p.findSegmentPosition,getSegmentReference:p.getSegmentReference,initSegmentReference:p.initSegmentReference,adjustSegmentDurations:p.adjustSegmentDurations,
getLastSegmentEndTime:p.getLastSegmentEndTime,getDuration:p.getDuration,segmentLookupStrategy:_.xD,mimeType:b.O.mimeType,codecs:b.O.codecs,frameRate:b.O.frameRate,bandwidth:b.bandwidth,width:b.O.width,height:b.O.height,kind:d,encrypted:0<c.drmInfos.length,keyId:a,language:n,originalLanguage:e,label:f,type:b.wa.contentType,primary:g,trickModeVideo:null,emsgSchemeIdUris:b.O.emsgSchemeIdUris,roles:h,channelsCount:b.O.bg,spatialAudio:q,closedCaptions:l,horizontalTiles:p.horizontalTiles,verticalTiles:p.verticalTiles,
durationPerTile:t}},NP=function(a,b){var c=a.a.attemptParameters,d=b.O.contentType;d=d===_.Q||d===_.Qc;try{var e=function(h,l,m,n){var p,q;return _.I(function(t){if(1==t.a)return p=_.DE(h,l,m,c),p.type=2,_.y(t,n.fetch(p),2);q=t.f;return t["return"](q.data)})};if(b.O.oe)return OO(b,e);if(b.O.lc)return aP(b,a.H);if(b.O.mc)return VO(b,e,a.H,!!a.f);var f=b.O.ra,g=b.Da.duration||0;d=function(){return g};return{createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(h){return 0<=
h&&h<g?1:null},getSegmentReference:function(h){return 1!==h?null:new _.uj(1,0,g,function(){return f},0,null,0,null,null,null,null,null,null,null,null,"",b.O.Na)},adjustSegmentDurations:function(){},getDuration:d,getLastSegmentEndTime:d,verticalTiles:void 0,horizontalTiles:void 0,initSegmentReference:null,Ea:0}}catch(h){if(d&&4002===h.code)return a.g.debug("Ignoring DASH_NO_SEGMENT_INFO error in a text stream",h),null;throw h;}},PP=function(a,b){0>a.j||a.A.ca(Math.max(3,a.j-b,_.CE(a.I)))},CP=function(a,
b,c,d,e){c=c||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,bg:null,Na:e[0]};d=d||c.ra;var f=_.fo(b,"BaseURL"),g=f.map(_.ho);e=e?xP(f,e,b.getAttribute("id")||void 0):null;f=b.getAttribute("contentType")||c.contentType;var h=b.getAttribute(_.Re)||c.mimeType,l=b.getAttribute(_.Fd)||c.codecs,m=cO(b,"frameRate",jO)||c.frameRate,n=_.fo(b,"InbandEventStream"),p=c.emsgSchemeIdUris.slice();n=_.w(n);for(var q=n.next();!q.done;q=n.next())(q=q.value.getAttribute(MN))&&!p.includes(q)&&
p.push(q);n=_.fo(b,"AudioChannelConfiguration");a=QP(a,n)||c.bg;f||(f=KP(h,l));return{ra:_.aE(d,g),Na:e||c.Na,oe:_.go(b,"SegmentBase")||c.oe,lc:_.go(b,"SegmentList")||c.lc,mc:_.go(b,"SegmentTemplate")||c.mc,width:cO(b,_.Wg,iO)||c.width,height:cO(b,_.ve,iO)||c.height,contentType:f,mimeType:h,codecs:l,frameRate:m,emsgSchemeIdUris:p,id:b.getAttribute("id")||"",bg:a}},QP=function(a,b){for(var c=_.w(b),d=c.next();!d.done;d=c.next()){var e=d.value;if(d=e.getAttribute(MN))if(e=e.getAttribute(_.Bg))switch(d){case "urn:mpeg:dash:outputChannelPositionList:2012":return e.trim().split(/ +/).length;
case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case "urn:dts:dash:audio_channel_configuration:2012":var f=parseInt(e,10);if(!f){a.g.warn(vN,d,e);continue}return f;case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":case "urn:dolby:dash:audio_channel_configuration:2011":f=parseInt(e,16);if(!f){a.g.warn(vN,d,e);continue}for(c=0;f;)f&1&&++c,f>>=1;return c;default:a.g.warn("Unrecognized audio channel scheme:",d,e)}}return null},MP=function(a,b){var c=b.oe?1:0;c+=b.lc?1:0;c+=
b.mc?1:0;if(0===c){if(b.contentType===_.Q||b.contentType===_.Qc)return!0;a.g.warn("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',b);return!1}1!==c&&(a.g.warn("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",b),b.oe?(a.g.info("Using SegmentBase by default."),
b.lc=null):a.g.info("Using SegmentList by default."),b.mc=null);return!0},DP=function(a,b,c,d){var e=d.getAttribute(MN)||"",f=d.getAttribute(_.Bg)||"",g=cO(d,ON,iO)||1,h=cO(d,LN,iO)||0,l=[],m={};d=_.w(_.fo(d,"Event"));for(var n=d.next();!n.done;m={Jc:m.Jc},n=d.next()){n=n.value;var p=cO(n,"presentationTime",iO)||0,q=cO(n,GN,iO)||0;p=b+p/g-h/g;q=p+q/g;null!=c&&(p=Math.min(p,b+c),q=Math.min(q,b+c));var t=_.vg;e.startsWith(_.xg)?t=_.vi:"urn:mpeg:dash:event:callback:2015"===e&&(t=_.Ve);m.Jc={configurationId:a.D.configurationId,
schemeIdUri:e,value:f,startTime:p,endTime:q,id:n.getAttribute("id")||"",type:t,eventElement:n};m.Jc.type===_.Ve&&(m.Jc.$e=function(v){return function(){var z=v.Jc;z.eventElement&&(z=z.eventElement.getAttribute("messageData")||"")&&z.startsWith("http")&&(z=_.ek(z),z.type=_.dk,a.D.networkingEngine.fetch(z))}}(m));l.push(m.Jc)}return l},KP=function(a,b){return _.aG(_.sl(a,b))?_.Q:a.split("/")[0]},RP=function(a){var b=new Set;a.forEach(function(c){c.variants.forEach(function(d){d.audio&&b.add(d.audio);
d.video&&b.add(d.video)})});return Array.from(b)},zP=function(a,b){var c=RP(a).filter(function(d){return d.getLastSegmentEndTime}).map(function(d){return d.getLastSegmentEndTime()});0<c.length&&(c=Math.min.apply(Math,_.eh(c)),_.ME(b.presentationTimeline,c+b.Da.start))},SP=function(){},OP=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"],IP=["urn:mpeg:mpegB:cicp:ColourPrimaries","urn:mpeg:mpegB:cicp:MatrixCoefficients","urn:mpeg:mpegB:cicp:TransferCharacteristics"];var EO=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];IO.prototype.parse=function(a,b,c,d){b=new CO(new DataView(b));if(440786851!==GO(b).id)throw _.Nh("Not an EBML element."),new _.O(_.P,3,3008);var e=GO(b);if(408125543!==e.id)throw _.Nh("Not a Segment element."),new _.O(_.P,3,3009);b=e.a.byteOffset;e=new CO(e.a);for(var f=null;_.gn(e.a);){var g=GO(e);if(357149030===g.id){f=g;break}}if(!f)throw _.Nh("Not an Info element."),new _.O(_.P,3,3010);f=new CO(f.a);g=1E6;for(e=null;_.gn(f.a);){var h=GO(f);if(2807729===h.id)g=HO(h);else if(17545===h.id)if(4===
h.a.byteLength)e=h.a.getFloat32(0);else if(8===h.a.byteLength)e=h.a.getFloat64(0);else throw new _.O(_.P,3,3003);}if(null==e)throw new _.O(_.P,3,3011);f=g/1E9;e*=f;a=GO(new CO(new DataView(a)));if(475249515!==a.id)throw _.Nh("Not a Cues element."),new _.O(_.P,3,3007);return KO(a,b,f,e,c,d)};var gP=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",_.ff).set(TN,_.Od).set(SN,_.Md).set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95",_.Md).set("urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2",_.Jd).set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb",_.Hd),rP=(new Map).set(_.Od,function(a){var b=qP(a);if(b)return{licenseUrl:b,origin:_.vD};if(a=aO(a.node,"urn:microsoft","laurl"))if(a=a.getAttribute("licenseUrl"))return{licenseUrl:a,origin:"ms:laurl"};return null}).set(_.Md,function(a){var b=
qP(a);if(b)return{licenseUrl:b,origin:_.vD};a=aO(a.node,PN,"pro");if(!a||!a.textContent)return null;a=_.Rj(a.textContent);return(a=_.zo(a).h)?{licenseUrl:a,origin:"mspr:pro"}:null}),iP=new _.K("clpp.dash.ContentProtection");_.u=tP.prototype;_.u.configure=function(a){this.a=a;this.J.a={clockSyncUri:a.clockSyncUri}};_.u.start=function(a,b){var c=this,d;return _.I(function(e){if(1==e.a)return c.l=[a],c.D=b,_.y(e,vP(c),2);d=e.f;c.D&&PP(c,d);if(!c.D)throw new _.O(_.P,7,7001);return e["return"](c.f)})};_.u.requestStop=function(){this.K=!0};_.u.stop=function(){this.a=this.D=null;this.l=[];this.f=null;this.G=[];this.H={};this.B=null;this.j=-1;this.A.stop();this.C.clear();this.h.clear();return this.o.destroy()};
_.u.update=function(){var a=this;vP(this)["catch"](function(b){if(a.D&&b)a.D.onError(b)})};_.u.setCurrentVariant=function(){};_.u.Yb=function(){var a=this,b,c,d;return _.I(function(e){switch(e.a){case 1:return a.g.debug(_.nD),b=0,_.D(e,2),_.y(e,vP(a),4);case 4:b=e.f;_.sh(e,3);break;case 2:if(c=_.F(e),a.D&&c.a&&(a.D.onError(c),d=c,d.severity===_.P))return e["return"]();case 3:if(!a.D)return e["return"]();if(!a.K){e.F(5);break}return _.y(e,a.stop(),6);case 6:return e["return"]();case 5:PP(a,b),_.B(e)}})};_.x(SP,_.Kt);SP.prototype.f=function(){_.Ju.mpd=tP;_.Hu[_.Sc]=tP};SP.prototype.a=function(){_.FF("mpd");_.GF(_.Sc)};SP.prototype.id=function(){return"dash"};_.J("clpp.dash.DashComponent",SP);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();