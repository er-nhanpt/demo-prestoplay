(function(){var g={}; var _ = _ || {}
var f=function(window){var ay="VerimatrixVCAS",by="clpp.verimatrix.Vcas",cy="clpp.verimatrix.VcasComponent",iy=function(a){_.bn.call(this,ay);var b={};b[dy]=dy;b[ey]=ey;var c=a.authenticator,d=void 0===a.licenseRequestVuidLocation?fy:a.licenseRequestVuidLocation;b=void 0===a.httpHeaderNames?b:a.httpHeaderNames;var e=a.widevineLicenseUrl,f=a.playReadyLicenseUrl,g=a.fairPlayLicenseUrl,h=a.fairPlayCertificateUrl,l=a.fairPlaySiteId,m=void 0===a.fairPlayAssetIdStrategy?gy:a.fairPlayAssetIdStrategy;this.A=a.deviceId;this.a=c;
this.C=d;this.B=b;this.w=hy(this,e);this.o=hy(this,f);this.l=hy(this,g);this.j=h;this.H=l;this.G=m;this.g=new _.K(by);_.T.empty(this.w)?this.g.warn(_.kc):this.Ya(_.Od,{licenseUrl:this.w,videoRobustness:[_.Tb,void 0],audioRobustness:[_.Sb,void 0],persistentStateRequired:!1,distinctiveIdentifierRequired:!1,serverCertificate:null,modifiers:{licenseRequest:this.h.bind(this)}});_.T.empty(this.o)?this.g.warn(_.Gb):this.Ya(_.Md,{licenseUrl:this.o,videoRobustness:["3000"],audioRobustness:["2000"],modifiers:{licenseRequest:this.h.bind(this)}});
_.T.empty(this.l)?this.g.warn(_.$a):_.T.empty(this.j)?this.g.warn(_.Za):this.Ya(_.Jd,{licenseUrl:this.l,certificateUrl:this.j,modifiers:{licenseRequest:this.K.bind(this),licenseResponse:this.L.bind(this),extractContentId:this.I.bind(this)}})},hy=function(a,b){if(a.C===fy){var c=Object.assign({},{deviceId:_.Qj(_.T.od(a.A))},a.a&&{authenticator:_.Qj(_.T.od(a.a))});return b+_.Sk(c)}return b},jy=function(){this.g=new _.K(cy)};_.x(iy,_.bn);
iy.prototype.h=function(a,b){if(this.C===ky){var c=this.B[ey],d={};d[this.B[dy]]=this.A;this.a&&(d[c]=this.a);Object.keys(d).forEach(function(e){b.headers[e]=d[e]})}};iy.prototype.I=function(a,b){var c=_.zn(b);switch(this.G){case ly:c=_.Sk({r:c,Xo:this.H},!0)}return c};iy.prototype.K=function(a,b){this.h(a,b);_.Cn(b)};iy.prototype.L=function(a,b){_.Dn(b)};_.J(by,iy);iy.prototype.constructor=iy.prototype.constructor;iy.NAME=ay;var fy="query-string",ky="http-header";
iy.LicenseRequestVuidLocation={QUERY_STRING:fy,HTTP_HEADER:ky};var dy="DeviceId",ey="Authenticator";iy.LicenseRequestHttpHeader={DEVICE_ID_HEADER:dy,AUTHENTICATOR_HEADER:ey};var gy="keyid",ly="contentid-siteid";iy.FairPlayAssetIdStrategy={KEYID:gy,CONTENTID_SITEID:ly};_.x(jy,_.Kt);jy.prototype.a=function(){delete _.Wm.VerimatrixVCAS};jy.prototype.h=function(a){a=a.getConfiguration();if(a.drm&&a.drm.env===ay){a=a.drm.customData;if(!a)throw new _.O(_.P,7,7100,_.Pd);a=new iy(a);this.g.info("Registering the Verimatrix VCAS Ultra environment");_.Xm(a)}};jy.prototype.id=function(){return"verimatrix-vcas"};_.J(cy,jy);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();