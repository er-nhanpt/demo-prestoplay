(function(){var g={}; var _ = _ || {}
var f=function(window){var Jx="VerimatrixVCAS",Kx="clpp.verimatrix.Vcas",Lx="clpp.verimatrix.VcasComponent",Rx=function(a){_.Um.call(this,Jx);var b={};b[Mx]=Mx;b[Nx]=Nx;var c=a.authenticator,d=void 0===a.licenseRequestVuidLocation?Ox:a.licenseRequestVuidLocation;b=void 0===a.httpHeaderNames?b:a.httpHeaderNames;var e=a.widevineLicenseUrl,f=a.playReadyLicenseUrl,g=a.fairPlayLicenseUrl,h=a.fairPlayCertificateUrl,l=a.fairPlaySiteId,m=void 0===a.fairPlayAssetIdStrategy?Px:a.fairPlayAssetIdStrategy;this.A=a.deviceId;this.a=c;
this.C=d;this.B=b;this.w=Qx(this,e);this.o=Qx(this,f);this.l=Qx(this,g);this.j=h;this.H=l;this.G=m;this.g=new _.K(Kx);_.R.empty(this.w)?this.g.warn(_.nc):this.Ya(_.Pd,{licenseUrl:this.w,videoRobustness:[_.Wb,void 0],audioRobustness:[_.Vb,void 0],persistentStateRequired:!1,distinctiveIdentifierRequired:!1,serverCertificate:null,modifiers:{licenseRequest:this.h.bind(this)}});_.R.empty(this.o)?this.g.warn(_.Kb):this.Ya(_.Nd,{licenseUrl:this.o,videoRobustness:["3000"],audioRobustness:["2000"],modifiers:{licenseRequest:this.h.bind(this)}});
_.R.empty(this.l)?this.g.warn(_.cb):_.R.empty(this.j)?this.g.warn(_.bb):this.Ya(_.Kd,{licenseUrl:this.l,certificateUrl:this.j,modifiers:{licenseRequest:this.K.bind(this),licenseResponse:this.L.bind(this),extractContentId:this.I.bind(this)}})},Qx=function(a,b){if(a.C===Ox){var c=Object.assign({},{deviceId:_.Kj(_.R.ld(a.A))},a.a&&{authenticator:_.Kj(_.R.ld(a.a))});return b+_.Lk(c)}return b},Sx=function(){this.g=new _.K(Lx)};_.x(Rx,_.Um);
Rx.prototype.h=function(a,b){if(this.C===Tx){var c=this.B[Nx],d={};d[this.B[Mx]]=this.A;this.a&&(d[c]=this.a);Object.keys(d).forEach(function(e){b.headers[e]=d[e]})}};Rx.prototype.I=function(a,b){var c=_.qn(b);switch(this.G){case Ux:c=_.Lk({r:c,Do:this.H},!0)}return c};Rx.prototype.K=function(a,b){this.h(a,b);_.tn(b)};Rx.prototype.L=function(a,b){_.un(b)};_.J(Kx,Rx);Rx.prototype.constructor=Rx.prototype.constructor;Rx.NAME=Jx;var Ox="query-string",Tx="http-header";
Rx.LicenseRequestVuidLocation={QUERY_STRING:Ox,HTTP_HEADER:Tx};var Mx="DeviceId",Nx="Authenticator";Rx.LicenseRequestHttpHeader={DEVICE_ID_HEADER:Mx,AUTHENTICATOR_HEADER:Nx};var Px="keyid",Ux="contentid-siteid";Rx.FairPlayAssetIdStrategy={KEYID:Px,CONTENTID_SITEID:Ux};_.x(Sx,_.tt);Sx.prototype.a=function(){delete _.Om.VerimatrixVCAS};Sx.prototype.h=function(a){a=a.getConfiguration();if(a.drm&&a.drm.env===Jx){a=a.drm.customData;if(!a)throw new _.N(_.P,7,7100,_.Qd);a=new Rx(a);this.g.info("Registering the Verimatrix VCAS Ultra environment");_.Pm(a)}};Sx.prototype.id=function(){return"verimatrix-vcas"};_.J(Lx,Sx);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();