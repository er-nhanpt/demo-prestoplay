(function(){var g={}; var _ = _ || {}
var f=function(window){var cx=" The setting will be ignored.",dx="VTT parser encountered an invalid VTT setting: ",ex="application/x-subrip",fx="text/srt",gx='text/vtt; codecs\x3d"vtt"',hx='text/vtt; codecs\x3d"wvtt"',ix=function(a){_.Xj(a,/[ \t]+/gm)},jx=function(a){return a.a===a.f.length?null:(a=_.Xj(a,/[^ \t\n]*/gm))?a[0]:null},kx=function(){},lx=function(a){var b="";for(a=a.split(/\n/);3<a.length;){for(var c=3;c<a.length;++c)a[2]+="\n"+a[c];a.splice(3,a.length-3)}if(3!==a.length)return"";c=0;!a[0].match(/\d+:\d+:\d+/)&&
a[1].match(/\d+:\d+:\d+/)&&(b+=a[0].match(/\w+/)+"\n",++c);if(a[c].match(/\d+:\d+:\d+/)){var d=a[1].match(/(\d+):(\d+):(\d+)(?:,(\d+))?\s*--?>\s*(\d+):(\d+):(\d+)(?:,(\d+))?/);if(d)b+=d[1]+":"+d[2]+":"+d[3]+"."+d[4]+" --\x3e ",b+=d[5]+":"+d[6]+":"+d[7]+"."+d[8]+"\n",++c;else return""}else return"";a[c]&&(b+=a[c]+"\n\n");return b},mx=function(){},nx=function(a){this.a=a},px=function(a,b,c){var d;if(d=/^align:(start|middle|center|end|left|right)$/.exec(b))b=d[1],"middle"===b?a.textAlign=_.Gi:a.textAlign=
_.Mv[b.toUpperCase()];else if(d=/^vertical:(lr|rl)$/.exec(b))a.writingMode="lr"===d[1]?_.Eg:_.Hg;else if(d=/^size:([\d.]+)%$/.exec(b))a.size=Number(d[1]);else if(d=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(b))a.position=Number(d[1]),d[2]&&(b=d[2],a.positionAlign=b===_.Ee||b===_.eg?_.Ee:b===_.Fe||b===_.oe?_.Fe:_.rd);else if(d=/^region:(.*)$/.exec(b)){if(b=ox(c,d[1]))a.region=b}else{a:{if(c=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(b))a.lineInterpretation=1,a.line=
Number(c[1]),c[2]&&(a.lineAlign=_.Nv[c[2].toUpperCase()]);else if(c=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(b))a.lineInterpretation=_.Ii,a.line=Number(c[1]),c[2]&&(a.lineAlign=_.Nv[c[2].toUpperCase()]);else{a=!1;break a}a=!0}return a}return!0},ox=function(a,b){var c=a.filter(function(d){return d.id===b});return c.length?c[0]:(_.Hh("VTT parser could not find a region with id: ",b," The region will be ignored."),null)},qx=function(a){a=_.Xj(a,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g);if(null==
a)return null;var b=Number(a[2]),c=Number(a[3]);return 59<b||59<c?null:Number(a[4])/1E3+c+60*b+3600*(Number(a[1])||0)},rx=function(){nx.apply(this,arguments)},sx=function(){this.a=null;this.g=new _.K("clpp.vtt.mp4")},ux=function(a,b,c){var d,e,f;(new _.qn).N("payl",_.tn(function(g){d=_.T.$(g)})).N("iden",_.tn(function(g){e=_.T.$(g)})).N("sttg",_.tn(function(g){f=_.T.$(g)})).parse(a);return d?tx(d,e,f,b,c):null},tx=function(a,b,c,d,e){a=new _.Li(d,e,a,_.Og);b&&(a.id=b);if(c)for(b=new _.Wj(c),c=jx(b);c;)px(a,
c,[])||_.Hh(dx,c,cx),ix(b),c=jx(b);return a},vx=function(){this.j=new mx};kx.prototype.a=function(a){a=_.T.$(a);a=a.replace(/\r+/g,"");a=a.replace(/^\s+|\s+$/g,"");a=a.replace(/<[a-zA-Z\\/][^>]*>/g,"");var b=a.split("\n\n");a="";if(0<b.length){a+="WEBVTT\n\n";b=_.w(b);for(var c=b.next();!c.done;c=b.next())a+=lx(c.value)}return _.T.$a(a)};mx.prototype.create=function(){return new kx};mx.prototype.probe=function(a,b){return(a===fx||a===ex)&&b===_.og};nx.prototype.parseInit=function(){};
nx.prototype.parseMedia=function(a,b){var c=_.T.$(a);c=c.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var d=c.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(d[0]))throw new _.O(_.P,2,2E3);c=b.periodStart;if(d[0].includes("X-TIMESTAMP-MAP")){var e=d[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),f=d[0].match(/MPEGTS:(\d+)/m);if(e&&f){c=qx(new _.Wj(e[1]));if(null==c)throw new _.O(_.P,2,2E3);f=Number(f[1]);for(e=b.segmentStart;95443.7176888889<=e;)e-=95443.7176888889,f+=8589934592;c=b.periodStart+
f/9E4-c}}else this.a.streaming.relativeTextTimestamp&&null!==b.segmentStart&&(c=b.segmentStart);f=[];e=_.w(d);for(var g=e.next();!g.done;g=e.next()){var h=g.value;if(/^region/.test(h.toLowerCase())){h=new _.Wj(h.replace(/\n/g," "));g=new _.Oi;jx(h);ix(h);for(var l=jx(h);l;){var m;a:{var n=g,p=l;if(m=/^id:(.*)$/.exec(p))n.id=m[1];else if(m=/^width:(\d{1,2}|100)%$/.exec(p))n.width=Number(m[1]);else if(m=/^lines:(\d+)$/.exec(p))n.height=Number(m[1]),n.heightUnits=2;else if(m=/^regionanchor:(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))n.regionAnchorX=
Number(m[1]),n.regionAnchorY=Number(m[2]);else if(m=/^viewportanchor:(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))n.viewportAnchorX=Number(m[1]),n.viewportAnchorY=Number(m[2]);else if(/^scroll:up$/.exec(p))n.scroll="up";else{m=!1;break a}m=!0}m||_.Hh("VTT parser encountered an invalid VTTRegion setting: ",l,cx);ix(h);l=jx(h)}f.push(g)}}e=[];h=_.w(d);for(g=h.next();!g.done;g=h.next())if(g=g.value,/^style/.test(g.toLowerCase())){g=g.replace(/^style/i,"").replace(/\n/g," ");l=/[^{}]+{[^{}]*}/g;do(m=l.exec(g))&&
e.push(m[0]);while(m)}h=[];d=_.w(d);for(g=d.next();!g.done;g=d.next())if(g=g.value,g.includes("--\x3e")){p=g.split("\n");var q=c;if(1===p.length&&!p[0]||/^NOTE($|[ \t])/.test(p[0])||"STYLE"===p[0])g=null;else{g=null;p[0].includes("--\x3e")||(g=p[0],p.splice(0,1));l=new _.Wj(p[0]);m=qx(l);var t=_.Xj(l,/[ \t]+--\x3e[ \t]+/g);n=qx(l);if(null==m||null==t||null==n)throw new _.O(_.P,2,2001);m+=q;n+=q;p=p.slice(1).join("\n").trim();m=new _.Li(m,n,p,_.Og);g&&(m.id=g);ix(l);for(n=jx(l);n;)px(m,n,f)||_.Hh(dx,
n,cx),ix(l),n=jx(l);null!=g&&(m.id=g);g=m}g&&h.push(g)}return{cues:h,styles:e}};_.x(rx,nx);rx.prototype.parseMedia=function(a,b){return nx.prototype.parseMedia.call(this,(new kx).a(a),b)};sx.prototype.parseInit=function(a){var b=this,c=!1;(new _.qn).N(_.Te,_.rn).N(_.rg,_.rn).N(_.Oe,_.rn).X("mdhd",function(d){0===d.version?(d.reader.skip(4),d.reader.skip(4),b.a=_.ln(d.reader),d.reader.skip(4)):(d.reader.skip(8),d.reader.skip(8),b.a=_.ln(d.reader),d.reader.skip(8));d.reader.skip(4)}).N(_.Se,_.rn).N(_.hg,_.rn).X(_.jg,_.sn).N("wvtt",function(){c=!0}).parse(a);if(!this.a)throw new _.O(_.P,2,2008);if(!c)throw new _.O(_.P,2,2008);};
sx.prototype.parseMedia=function(a,b){if(!this.a)throw this.g.error("No init segment for MP4+VTT!"),new _.O(_.P,2,2008);var c=0,d=[],e,f=[],g=!1,h=!1,l=!1,m=null;(new _.qn).N("moof",_.rn).N("traf",_.rn).X("tfdt",function(H){g=!0;c=0===H.version?_.ln(H.reader):_.nn(H.reader)}).X("tfhd",function(H){var M=H.flags;H=H.reader;H.skip(4);M&1&&H.skip(8);M&2&&H.skip(4);m=M&8?_.ln(H):null}).X("trun",function(H){h=!0;var M=H.version,R=H.flags;H=H.reader;var V=_.ln(H);R&1&&H.skip(4);R&4&&H.skip(4);for(var S=
[],Ba=0;Ba<V;Ba++){var Ca={duration:null,sampleSize:null,Ig:null};R&256&&(Ca.duration=_.ln(H));R&512&&(Ca.sampleSize=_.ln(H));R&1024&&H.skip(4);R&2048&&(Ca.Ig=0===M?_.ln(H):_.mn(H));S.push(Ca)}d=S}).N(_.Ne,_.tn(function(H){l=!0;e=H})).parse(a);if(!l&&!g&&!h)throw new _.O(_.P,2,2008);var n=c,p=new DataView(e.buffer,e.byteOffset,e.byteLength);p=new _.fn(p,!1);for(var q=_.w(d),t=q.next();!t.done;t=q.next()){t=t.value;var v=t.duration||m,z=t.Ig?c+t.Ig:n;n=z+(v||0);var A=0;do{var G=_.ln(p);A+=G;var E=
_.ln(p);E=_.vn(E);var C=null;"vttc"===E?8<G&&(C=_.pn(p,G-8)):("vtte"!==E&&this.g.error("Unknown box "+E+"! Skipping!"),p.skip(G-8));v?C&&f.push(ux(C,b.periodStart+z/this.a,b.periodStart+n/this.a)):this.g.error("WVTT sample duration unknown, and no default found!")}while(t.sampleSize&&A<t.sampleSize)}return{cues:f.filter(_.Ui),styles:[]}};_.x(vx,_.Kt);vx.prototype.f=function(){_.lv(_.og,nx);_.lv(gx,nx);_.lv(hx,nx);_.lv(_.Vc,sx);_.lv(fx,rx);_.lv(ex,rx);_.hl.push(this.j)};vx.prototype.a=function(){_.vv(_.og);_.vv(gx);_.vv(hx);_.vv(_.Vc);_.vv(fx);_.vv(ex);_.jl(this.j)};vx.prototype.id=function(){return"subtitles-vtt"};_.J("clpp.vtt.VttComponent",vx);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();